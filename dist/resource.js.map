{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/collection/id.js","webpack:///./src/helpers/compareResourceIDs.js","webpack:///./src/resource/id.js","webpack:///./src/resource/object.js","webpack:///./src/resource/props.js","webpack:///./src/transform/id/alias.js","webpack:///./src/transform/id/post.js","webpack:///./src/transform/id/pre.js","webpack:///./src/transform/object/post.js","webpack:///./src/transform/object/pre.js","webpack:///external \"avl\"","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"lodash/defaults\"","webpack:///external \"lodash/get\"","webpack:///external \"lodash/isEmpty\"","webpack:///external \"lodash/isFunction\"","webpack:///external \"lodash/isNil\"","webpack:///external \"lodash/isObject\"","webpack:///external \"lodash/merge\"","webpack:///external \"lodash/omit\"","webpack:///external \"lodash/pick\"","webpack:///external \"lodash/set\""],"names":["ResourceIDCollection","constructor","source","options","_avl","Avl","compareResourceIDs","_isArray","_isEmpty","ResourceConstructor","arguments","length","Array","isArray","forEach","resource","ResourceID","has","add","count","isEmpty","toJSON","globalScopeCollection","values","map","resourceID","contains","get","node","find","data","keys","entries","push","key","insert","update","compare","a","b","transform","_source","_value","id","type","include","included","typeOptions","from","ResourceObject","_included","relationships","attr","attribute","path","attributes","test","someAttr","defaults","merge","someOtherAttr","RESOURCE_OPTIONAL_PROPS","RESOURCE_IDENTIFIER_ESSENTIAL_PROPS","RESOURCE_IDENTIFIER_PROPS","RESOURCE_OBJECT_OPTIONAL_PROPS","RESOURCE_PROPS","assignAlias","alias","fullPath","obj","_omitProps","_alias","aliased","prop","fallback","error","TypeError","transformObject","fields","coreTransformObject","alienMembers","links"],"mappings":"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","file":"resource.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/resource/object.js\");\n","import Avl from 'avl'\r\nimport get from 'lodash/get'\r\n\r\nimport ResourceID from '../resource/id'\r\nimport compareResourceIDs from '../helpers/compareResourceIDs'\r\n\r\nclass ResourceIDCollection {\r\n  constructor(source, options) {\r\n    Object.assign(this, {\r\n      _avl: new Avl(compareResourceIDs, true),\r\n      _isArray: false,\r\n      _isEmpty: true\r\n    })\r\n\r\n    const ResourceConstructor = this.ResourceConstructor\r\n\r\n    if(arguments.length) {\r\n      if (Array.isArray(source)) {\r\n        source.forEach(source => {\r\n          const resource = source instanceof ResourceID ? source : new ResourceConstructor(source, options)\r\n\r\n          if (!this.has(resource)) {\r\n            this.add(resource)\r\n          }\r\n        })\r\n\r\n        if (this.count()) {\r\n          this._isEmpty = false\r\n        }\r\n        this._isArray = true\r\n      } else {\r\n        const resource = source instanceof ResourceID ? source : new ResourceConstructor(source, options)\r\n        this.add(resource)\r\n        this._isArray = false\r\n        this._isEmpty = false\r\n      }\r\n    }\r\n  }\r\n\r\n  get ResourceConstructor() {\r\n    return ResourceID\r\n  }\r\n\r\n  isArray() {\r\n    return this._isArray\r\n  }\r\n\r\n  isEmpty() {\r\n    return this._isEmpty\r\n  }\r\n\r\n  toJSON(options, globalScopeCollection = this) {\r\n    if(this.isArray()) {\r\n      return this.values().map(resourceID => resourceID.toJSON(options))\r\n    } else if(this.isEmpty()) {\r\n      return null\r\n    } else {\r\n      const resourceID = this.values()[0]\r\n      return resourceID.toJSON(options)\r\n    }\r\n  }\r\n\r\n  has(resourceID) {\r\n    return this._avl.contains(resourceID)\r\n  }\r\n\r\n  get(resourceID) {\r\n    const node = this._avl.find(resourceID)\r\n    if(node) {\r\n      return node.data\r\n    }\r\n  }\r\n\r\n  keys() {\r\n    return this._avl.keys()\r\n  }\r\n\r\n  values() {\r\n    return this._avl.values()\r\n  }\r\n\r\n  entries() {\r\n    const entries = []\r\n\r\n    this._avl.forEach(node => {\r\n      entries.push([\r\n        node.key,\r\n        node.data\r\n      ])\r\n    })\r\n\r\n    return entries\r\n  }\r\n\r\n  count() {\r\n    return this.keys().length\r\n  }\r\n\r\n  add(resource) {\r\n    this._avl.insert(resource, resource)\r\n\r\n    return this.count()\r\n  }\r\n\r\n  update(resource) {\r\n    if(this.has(resource)) {\r\n      this.add(resource)\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n}\r\n\r\nexport default ResourceIDCollection\r\n","export default function compare(a, b) {\r\n  if (!a) {\r\n    if (!b) {\r\n      return 0\r\n    }\r\n\r\n    return -1\r\n  } else if (!b) {\r\n    return 1\r\n  }\r\n\r\n  for (let key of ['type', 'id']) {\r\n    if (a[key] < b[key]) {\r\n      return -1\r\n    }\r\n\r\n    if (a[key] > b[key]) {\r\n      return 1\r\n    }\r\n  }\r\n\r\n  return 0\r\n}\r\n","import pick from 'lodash/pick'\r\nimport {\r\n  RESOURCE_IDENTIFIER_PROPS\r\n} from './props'\r\n\r\nimport preTransformID from '../transform/id/pre'\r\nimport postTransformID from '../transform/id/post'\r\n\r\nexport default class ResourceID {\r\n  static transform(source, options) {\r\n    return preTransformID(source, options)\r\n  }\r\n\r\n  constructor(source, options) {\r\n    this._source = source\r\n    // console.log('source', this._source)\r\n    // console.log('options', options)\r\n    this._value = preTransformID(source, options)\r\n    // console.log('value', this._value)\r\n  }\r\n\r\n  get id() {\r\n    return this._value && this._value.id\r\n  }\r\n\r\n  get type() {\r\n    return this._value && this._value.type\r\n  }\r\n\r\n  toJSON(options) {\r\n    return postTransformID(this._value)\r\n  }\r\n}\r\n","import get from 'lodash/get'\r\n\r\nimport ResourceID from './id'\r\nimport ResourceIDCollection from '../collection/id'\r\n\r\nimport preTransformID from '../transform/id/pre'\r\n\r\nimport preTransformObject from '../transform/object/pre'\r\nimport postTransformObject from '../transform/object/post'\r\n\r\nfunction include(source, options) {\r\n  if (typeof options === 'object') {\r\n    const included = {}\r\n\r\n    for (let type in options) {\r\n      const typeOptions = options[type]\r\n      let _source = source\r\n\r\n      if('from' in typeOptions) {\r\n        _source = get(source, typeOptions.from)\r\n      }\r\n\r\n      included[type] = new ResourceIDCollection(_source, typeOptions)\r\n    }\r\n\r\n    return included\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nclass ResourceObject extends ResourceID {\r\n  static transform(source, options) {\r\n    return preTransformObject(preTransformID(source, options))\r\n  }\r\n\r\n  constructor(source, options = {}) {\r\n    super(source, options)\r\n\r\n    this._value = preTransformObject(this._value, options)\r\n\r\n    this._included = include(source, options.relationships)\r\n  }\r\n\r\n  get attr() {\r\n    return this.attribute\r\n  }\r\n\r\n  attribute(path) {\r\n    return get(this.attributes(), path)\r\n  }\r\n\r\n  attributes() {\r\n    if(this._value) {\r\n      return this._value.attributes\r\n    }\r\n  }\r\n\r\n  included() {\r\n    if(arguments.length) {\r\n      return this._included[arguments[0]]\r\n    }\r\n    return this._included\r\n  }\r\n\r\n  toJSON(options) {\r\n    return postTransformObject(this._value, options)\r\n  }\r\n}\r\n\r\nconst source = {\r\n  id: 0,\r\n  test: true,\r\n  someAttr: 'someValue'\r\n}\r\n\r\nconst options = {\r\n  // fields: [\r\n  //   'test'\r\n  // ],\r\n  defaults: {\r\n    type: '#test'\r\n  },\r\n  merge: {\r\n    attributes: {\r\n      someOtherAttr: 'someOtherValue'\r\n    }\r\n  }\r\n}\r\n\r\n// const rID = new ResourceID(source, options)\r\n// const r = new ResourceObject(source, options)\r\n//\r\n// console.log(rID.toJSON())\r\n// console.log(r.toJSON())\r\n\r\nexport default ResourceObject\r\n","// resource identifier & object members\r\nexport const RESOURCE_OPTIONAL_PROPS = ['meta']\r\n\r\n// resource identifier members\r\nexport const RESOURCE_IDENTIFIER_ESSENTIAL_PROPS = ['type', 'id']\r\nexport const RESOURCE_IDENTIFIER_PROPS = [...RESOURCE_IDENTIFIER_ESSENTIAL_PROPS, ...RESOURCE_OPTIONAL_PROPS]\r\n\r\n// resource object members\r\nexport const RESOURCE_OBJECT_OPTIONAL_PROPS = ['attributes', 'relationships', 'links', ...RESOURCE_OPTIONAL_PROPS]\r\nexport const RESOURCE_PROPS = [\r\n  ...RESOURCE_IDENTIFIER_ESSENTIAL_PROPS,\r\n  ...RESOURCE_OBJECT_OPTIONAL_PROPS\r\n]\r\n","import omit from 'lodash/omit'\r\nimport set from 'lodash/set'\r\nimport get from 'lodash/get'\r\n\r\nfunction assignAlias(data, alias, fullPath) {\r\n  if (typeof alias == 'string') {\r\n    return alias.length ? get(data, alias) : data\r\n  } else {\r\n    let obj = Array.isArray(alias) ? [] : Object.assign({}, data)\r\n\r\n    if (typeof alias == 'object') {\r\n      const _omitProps = []\r\n\r\n      for (let key in alias) {\r\n        const path = fullPath + key\r\n\r\n        let _alias = alias[key]\r\n\r\n        const aliased = assignAlias(data, _alias, path)\r\n\r\n        if (path != _alias) {\r\n          _omitProps.push(_alias)\r\n        }\r\n\r\n        set(obj, key, aliased)\r\n      }\r\n\r\n      if (_omitProps.length) {\r\n        obj = omit(obj, _omitProps)\r\n      }\r\n    }\r\n\r\n    return obj\r\n  }\r\n}\r\n\r\nexport default function(data, options) {\r\n  return assignAlias(data, options, '')\r\n}\r\n","import pick from 'lodash/pick'\r\nimport isObject from 'lodash/isObject'\r\nimport isNil from 'lodash/isNil'\r\n\r\nimport {\r\n  RESOURCE_IDENTIFIER_PROPS\r\n} from '../../resource/props'\r\n\r\nfunction transform(data, options) {\r\n  if (isNil(data)) {\r\n    return null\r\n  }\r\n\r\n  if (isObject(data)) {\r\n    data = pick(data, RESOURCE_IDENTIFIER_PROPS)\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nexport default transform\r\n","import merge from 'lodash/merge'\r\nimport defaults from 'lodash/defaults'\r\nimport pick from 'lodash/pick'\r\nimport isObject from 'lodash/isObject'\r\nimport isNil from 'lodash/isNil'\r\nimport isFunction from 'lodash/isFunction'\r\n\r\nimport assignAlias from './alias'\r\nimport {\r\n  RESOURCE_IDENTIFIER_ESSENTIAL_PROPS\r\n} from '../../resource/props'\r\n\r\nfunction transform(data, options) {\r\n  if (isObject(options)) {\r\n    if ('alias' in options) {\r\n      data = assignAlias(data, options.alias)\r\n    }\r\n\r\n    if ('defaults' in options) {\r\n      data = defaults({}, data, options.defaults)\r\n    }\r\n\r\n    if ('merge' in options) {\r\n      data = merge({}, data, options.merge)\r\n    }\r\n  }\r\n\r\n  if (isObject(data)) {\r\n    data = Object.assign({}, data)\r\n\r\n    for (let prop of RESOURCE_IDENTIFIER_ESSENTIAL_PROPS) {\r\n      if (isNil(data[prop])) {\r\n        if('fallback' in options) {\r\n          if(isFunction(options.fallback)) {\r\n            data = options.fallback(data)\r\n          } else {\r\n            data = options.fallback\r\n          }\r\n\r\n          break\r\n        }\r\n\r\n        const error = new TypeError(`Cannot transform '${ prop }' prop to string`)\r\n        Object.assign(error, {\r\n          data,\r\n          prop\r\n        })\r\n\r\n        throw error\r\n      }\r\n\r\n      data[prop] += ''\r\n    }\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nexport default transform\r\n","import isNil from 'lodash/isNil'\r\nimport isEmpty from 'lodash/isEmpty'\r\nimport pick from 'lodash/pick'\r\nimport isObject from 'lodash/isObject'\r\nimport isFunction from 'lodash/isFunction'\r\n\r\nimport {\r\n  RESOURCE_PROPS\r\n} from '../../resource/props'\r\n\r\nfunction transformObject(data, options) {\r\n  if (isNil(data)) {\r\n    return null\r\n  }\r\n\r\n  if (isObject(options)) {\r\n    if('fields' in options) {\r\n      const attributes = pick(data.attributes, options.fields)\r\n\r\n      if(!isEmpty(attributes)) {\r\n        data.attributes = attributes\r\n      }\r\n    }\r\n  }\r\n\r\n  data = pick(data, RESOURCE_PROPS)\r\n\r\n  return data\r\n}\r\n\r\nexport default transformObject\r\n","import pick from 'lodash/pick'\r\nimport omit from 'lodash/omit'\r\nimport defaults from 'lodash/defaults'\r\nimport isEmpty from 'lodash/isEmpty'\r\nimport isObject from 'lodash/isObject'\r\nimport isFunction from 'lodash/isFunction'\r\n\r\nimport {\r\n  RESOURCE_PROPS\r\n} from '../../resource/props'\r\n\r\nfunction coreTransformObject(data, options) {\r\n  const alienMembers = omit(data, RESOURCE_PROPS)\r\n\r\n  if(!isEmpty(alienMembers)) {\r\n    data.attributes = defaults(data.attributes, alienMembers)\r\n  }\r\n\r\n  if (isObject(options)) {\r\n    if ('links' in options) {\r\n      if(isFunction(options.links)) {\r\n        data.links = options.links(data.type, data.id)\r\n      } else {\r\n        data.links = Object.assign({}, options.links)\r\n      }\r\n    }\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nexport default coreTransformObject\r\n","module.exports = require(\"avl\");","module.exports = require(\"babel-runtime/core-js/object/assign\");","module.exports = require(\"lodash/defaults\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/isEmpty\");","module.exports = require(\"lodash/isFunction\");","module.exports = require(\"lodash/isNil\");","module.exports = require(\"lodash/isObject\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"lodash/omit\");","module.exports = require(\"lodash/pick\");","module.exports = require(\"lodash/set\");"],"sourceRoot":""}