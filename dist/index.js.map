{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/cache/index.js","webpack:///./src/fetch.js","webpack:///./src/helpers/cache.js","webpack:///./src/helpers/wrapFor.js","webpack:///./src/include/index.js","webpack:///./src/index.js","webpack:///./src/prefetch.js","webpack:///./src/promiseTree.js","webpack:///./src/transform/pre/alias.js","webpack:///./src/transform/pre/defineSourceProp.js","webpack:///./src/transform/pre/index.js","webpack:///./src/transform/pre/rootMembers.js","webpack:///./src/transform/resourceProps.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"babel-runtime/core-js/object/define-property\"","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///external \"babel-runtime/core-js/object/values\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"lodash/defaults\"","webpack:///external \"lodash/get\"","webpack:///external \"lodash/merge\"","webpack:///external \"lodash/omit\"","webpack:///external \"lodash/pick\"","webpack:///external \"lodash/set\"","webpack:///external \"lodash/setWith\""],"names":["IndexedCache","constructor","Object","defineProperty","enumerable","value","keys","_cache","set","path","get","LinkedIndexedCache","indexedCache","TypeError","link","prototype","call","split","base","slice","prop","length","target","undefined","configurable","_linked","fetch","queries","action","type","options","args","resourceCache","dataCache","includedCache","typeOptions","data","included","include","cache","id","extract","reduce","array","values","concat","forSingleOrMany","forMany","f","Array","isArray","map","apply","arguments","forEach","extractIncluded","assignIncluded","resourceIds","_source","from","_include","createIncludeDict","dict","pop","filter","includePromiseTree","run","JsonApi","_connected","connect","_createTypeError","_fetch","Function","key","_wrappedPreTransform","prefetch","query","_transformTreePath","push","_createNode","then","_createPromiseTree","paths","rootNode","result","_runPromiseTree","node","rejected","all","error","PromiseTree","tree","promiseTree","_tree","assignAlias","alias","fullPath","obj","_omitProps","_alias","aliased","source","preTransform","defaults","merge","attributes","fields","rootAttributes","RESOURCE_IDENTIFIER_PROPS","ADDITIONAL_RESOURCE_PROPS","RESOURCE_PROPS"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import get from 'lodash/get'\nimport set from 'lodash/setWith'\n\nexport class IndexedCache {\n  constructor() {\n    Object.defineProperty(this, '_cache', {\n      enumerable: true,\n      value: {}\n    })\n  }\n\n  get keys() {\n    return Object.keys(this._cache)\n  }\n\n  set(path, value) {\n    set(this._cache, path, value, Object)\n\n    return this\n  }\n\n  get(path) {\n    return get(this._cache, path)\n  }\n}\n\nexport class LinkedIndexedCache extends IndexedCache {\n  constructor(indexedCache) {\n    super()\n\n    if(!indexedCache instanceof IndexedCache) {\n      throw TypeError('First arguments should be an instance of IndexedCache')\n    }\n\n    Object.defineProperty(this, '_linked', {\n      // enumerable: true,\n      value: indexedCache\n    })\n  }\n\n  set(path, value) {\n    this.link(path)\n\n    return IndexedCache.prototype.set.call(this, path, value)\n  }\n\n  link(path) {\n    if(typeof path === 'string') {\n      path = path.split('.')\n    }\n\n    const base = path.slice(0, -1)\n\n    const prop = path[path.length - 1]\n    let target\n\n    if (base.length) {\n      target = LinkedIndexedCache.prototype.get.call(this, base)\n\n      if(target === undefined) {\n        target = {}\n        IndexedCache.prototype.set.call(this, base, target)\n      }\n    } else {\n      target = this._cache\n    }\n\n    Object.defineProperty(target, prop, {\n      enumerable: true,\n      configurable: true,\n      set: value => {\n        this._linked.set(path, value)\n      },\n      get: () => this._linked.get(path)\n    })\n\n    if(!target[prop]) {\n      target[prop] = undefined\n    }\n\n    return this\n  }\n}\n","import {\n  IndexedCache,\n  LinkedIndexedCache\n} from './cache'\nimport preFetch from './prefetch'\nimport include from './include'\n\nimport {\n  cache,\n  extract\n} from './helpers/cache'\n\nexport default async function fetch(queries, action, type, options, ...args) {\n  const resourceCache = new IndexedCache()\n  const dataCache = new LinkedIndexedCache(resourceCache)\n  const includedCache = new LinkedIndexedCache(resourceCache)\n\n  const typeOptions = options[type]\n\n  let {\n    data,\n    included\n  } = await preFetch(queries[type][action], typeOptions, ...args)\n\n  cache(data, dataCache)\n  cache(included, includedCache)\n\n  if (typeOptions.include) {\n    await include(data, includedCache, queries, action, type, options, ...args)\n  }\n\n  included = extract(includedCache)\n\n  return {\n    data,\n    included\n  }\n}\n","import {\n  forSingleOrMany\n} from './wrapFor'\n\nexport const cache = forSingleOrMany((data, indexedCache) => {\n  indexedCache.set([data.type, data.id], data)\n})\n\nexport const extract = indexedCache => {\n  return indexedCache.keys.reduce((array, type) => {\n    const values = Object.values(indexedCache.get(type))\n    return array.concat(values)\n  }, [])\n}\n","export function forSingleOrMany(f) {\n  return function(data, ...args) {\n    if (Array.isArray(data)) {\n      return data.map(data => f.call(this, data, ...args))\n    } else if (typeof data == 'object') {\n      return f.apply(this, arguments)\n    }\n    return data\n  }\n}\n\nexport function forMany(f) {\n  return function(...args) {\n    const data = args[0]\n    if (Array.isArray(data)) {\n      return f.apply(this, args)\n    }\n    return data\n  }\n}\n","import get from 'lodash/get'\n\nimport preTransform from '../transform/pre'\nimport preFetch from '../prefetch'\nimport PromiseTree from '../promiseTree'\n\nimport {\n  IndexedCache,\n  LinkedIndexedCache\n} from '../cache'\n\nimport {\n  cache,\n  extract\n} from '../helpers/cache'\nimport {\n  forSingleOrMany\n} from '../helpers/wrapFor'\n\nconst forEach = forSingleOrMany((data, f) => f(data))\n\nconst extractIncluded = (data, options) => {\n\n}\n\nconst assignIncluded = forSingleOrMany((data, options, cache) => {\n  if (data) {\n    Object.defineProperty(data, '_include', {\n      // enumerable: true,\n      value: new LinkedIndexedCache(cache)\n    })\n\n    for (let type in options) {\n      let typeOptions = options[type]\n\n      let resourceIds = get(data._source, typeOptions.from)\n\n      forEach(resourceIds, id => {\n        data._include.link([type, id])\n      })\n    }\n  }\n})\n\nexport default async function include(data, includedCache, queries, action, type, options, ...args) {\n  const typeOptions = options[type]\n\n  assignIncluded(data, typeOptions.include, includedCache)\n\n  function createIncludeDict(include) {\n    return Object.keys(include).reduce((dict, path) => {\n      const type = path.split('.').pop()\n\n      dict[path] = async () => {\n        const typeOptions = Object.assign({}, options[type], {\n          filter: {\n            id: Object.keys(includedCache.get(type))\n          }\n        })\n\n        const {\n          data,\n          included\n        } = await preFetch(queries[type][action], typeOptions, ...args)\n\n        cache(data, includedCache)\n        cache(included, includedCache)\n\n        return includedCache\n      }\n\n      return dict\n    }, {})\n  }\n\n  const dict = createIncludeDict(typeOptions.include)\n\n  const includePromiseTree = new PromiseTree(dict)\n\n  await includePromiseTree.run()\n}\n","import get from 'lodash/get'\nimport set from 'lodash/set'\n\nimport preFetch from './prefetch'\nimport include from './include'\nimport fetch from './fetch'\n\nclass JsonApi {\n  constructor(options = {}) {\n    this.options = {}\n    this._connected = {}\n  }\n\n  connect(type, fetch) {\n    const keys = [\n      'create',\n      'read',\n      'update',\n      'delete'\n    ]\n    const _createTypeError = () => new TypeError('Invalid argument type for fetch')\n    const _fetch = {}\n    if (fetch instanceof Function) {\n      keys.forEach(key => _fetch[key] = fetch)\n    } else if (fetch instanceof Object) {\n      keys.forEach(key => {\n        if (!_fetch[key] instanceof Function) {\n          throw _createTypeError()\n        }\n        _fetch[key] = fetch[key]\n      })\n    } else {\n      throw _createTypeError()\n    }\n\n    this._connected[type] = _fetch\n  }\n\n  fetch(action, type, options, ...args) {\n    return fetch(this._connected, action, type, options, ...args)\n  }\n}\n\nexport default JsonApi\n","import preTransform from './transform/pre'\n\nimport { forSingleOrMany } from './helpers/wrapFor'\n\nconst _wrappedPreTransform = forSingleOrMany(preTransform)\n\nexport default async function prefetch(query, options, ...args) {\n  let {\n    data,\n    included\n  } = await query(options, ...args)\n\n  data = _wrappedPreTransform(data, options)\n\n  return {\n    data,\n    included\n  }\n}\n","import set from 'lodash/set'\n\nfunction _transformTreePath(path) {\n  let split\n\n  if(Array.isArray(path)) {\n    split = path\n  } else if(typeof path == 'string') {\n    split = path.split('.')\n  } else {\n    throw TypeError('Path should be a string or array')\n  }\n\n  return split.slice(0, -1).reduce((split, key) => {\n    split.push(key)\n    split.push('then')\n    return split\n  }, []).concat(split.slice(-1))\n}\n\nfunction _createNode(run, then) {\n  return {\n    run,\n    then\n  }\n}\n\nfunction _createPromiseTree(paths) {\n  const then = {}\n\n  for (let path in paths) {\n    set(then, _transformTreePath(path), _createNode(paths[path], null))\n  }\n\n  const rootNode = _createNode(result => result, then)\n\n  return rootNode\n}\n\nasync function _runPromiseTree(result, node, rootNode = node) {\n  if(rootNode.rejected) {\n    throw 'cancelled'\n  }\n\n  try {\n    if (node) {\n      result = await node.run(await result)\n\n      if (node.then) {\n        const keys = Object.keys(node.then)\n\n        await Promise.all(keys.map(key => _runPromiseTree(result, node.then[key], rootNode)))\n      }\n\n      return result\n    }\n  } catch(error) {\n    node.rejected = true\n    throw error\n  }\n}\n\nexport default class PromiseTree {\n  constructor(paths) {\n    const tree = _createPromiseTree(paths)\n\n    Object.defineProperty(this, '_tree', {\n      value: tree\n    })\n  }\n\n  static run(paths, data) {\n    const promiseTree = new PromiseTree(paths)\n    return promiseTree.run(data)\n  }\n\n  run(data) {\n    return _runPromiseTree(data, this._tree)\n  }\n}\n","import omit from 'lodash/omit'\nimport set from 'lodash/set'\nimport get from 'lodash/get'\n\nfunction assignAlias(data, alias, fullPath) {\n  if (typeof alias == 'string') {\n    return alias.length ? get(data, alias) : data\n  } else {\n    let obj = Array.isArray(alias) ? [] : Object.assign({}, data)\n\n    if (typeof alias == 'object') {\n      const _omitProps = []\n\n      for (let key in alias) {\n        const path = fullPath + key\n\n        let _alias = alias[key]\n\n        const aliased = assignAlias(data, _alias, path)\n\n        if (path != _alias) {\n          _omitProps.push(_alias)\n        }\n\n        set(obj, key, aliased)\n      }\n\n      if(_omitProps.length) {\n        obj = omit(obj, _omitProps)\n      }\n    }\n\n    return obj\n  }\n}\n\nexport default (data, options) => assignAlias(data, options, '')\n","export default (data, source) => {\n  Object.defineProperty(data, '_source', {\n    value: source\n  })\n}\n","import merge from 'lodash/merge'\nimport defaults from 'lodash/defaults'\nimport pick from 'lodash/pick'\nimport get from 'lodash/get'\n\nimport assignAlias from './alias'\nimport rootMembers from './rootMembers'\nimport defineSourceProp from './defineSourceProp'\n\nconst preTransform = (data, options) => {\n  let source = data\n\n  if('from' in options) {\n    data = get(data, options.from)\n  }\n\n  if ('alias' in options) {\n    data = assignAlias(data, options.alias)\n  }\n\n  data = rootMembers(data)\n\n  defineSourceProp(data, source)\n\n  if ('defaults' in options) {\n    defaults(data, options.defaults)\n  }\n\n  if ('merge' in options) {\n    merge(data, options.merge)\n  }\n\n  if ('fields' in options) {\n    data.attributes = pick(data.attributes, options.fields)\n  }\n\n  return data\n}\n\nexport default preTransform\n","import omit from 'lodash/omit'\nimport pick from 'lodash/pick'\nimport defaults from 'lodash/defaults'\n\nimport {\n  RESOURCE_PROPS\n} from '../resourceProps'\n\nexport default data => {\n  const rootAttributes = omit(data, RESOURCE_PROPS)\n\n  if (Object.keys(rootAttributes)) {\n    defaults(data, {\n      attributes: rootAttributes\n    })\n  }\n\n  data = pick(data, RESOURCE_PROPS)\n\n  return data\n}\n","export const RESOURCE_IDENTIFIER_PROPS = ['id', 'type', 'meta']\nexport const ADDITIONAL_RESOURCE_PROPS = ['attributes', 'relationships', 'links']\nexport const RESOURCE_PROPS = [\n  ...RESOURCE_IDENTIFIER_PROPS,\n  ...ADDITIONAL_RESOURCE_PROPS\n]\n","module.exports = require(\"babel-runtime/core-js/object/assign\");","module.exports = require(\"babel-runtime/core-js/object/define-property\");","module.exports = require(\"babel-runtime/core-js/object/keys\");","module.exports = require(\"babel-runtime/core-js/object/values\");","module.exports = require(\"babel-runtime/core-js/promise\");","module.exports = require(\"lodash/defaults\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"lodash/omit\");","module.exports = require(\"lodash/pick\");","module.exports = require(\"lodash/set\");","module.exports = require(\"lodash/setWith\");"],"sourceRoot":""}