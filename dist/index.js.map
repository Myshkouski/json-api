{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/cache/index.js","webpack:///./src/fetch.js","webpack:///./src/helpers/cache.js","webpack:///./src/helpers/wrapFor.js","webpack:///./src/include/index.js","webpack:///./src/index.js","webpack:///./src/prefetch.js","webpack:///./src/promiseTree.js","webpack:///./src/transform/post/index.js","webpack:///./src/transform/post/sort.js","webpack:///./src/transform/pre/alias.js","webpack:///./src/transform/pre/defineSourceProp.js","webpack:///./src/transform/pre/index.js","webpack:///./src/transform/pre/rootMembers.js","webpack:///./src/transform/resourceProps.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"babel-runtime/core-js/object/define-properties\"","webpack:///external \"babel-runtime/core-js/object/define-property\"","webpack:///external \"babel-runtime/core-js/object/entries\"","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///external \"babel-runtime/core-js/object/values\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"lodash/defaults\"","webpack:///external \"lodash/get\"","webpack:///external \"lodash/merge\"","webpack:///external \"lodash/omit\"","webpack:///external \"lodash/pick\"","webpack:///external \"lodash/set\"","webpack:///external \"lodash/setWith\""],"names":["IndexedCache","constructor","Object","defineProperty","enumerable","value","keys","_cache","set","path","get","LinkedIndexedCache","indexedCache","TypeError","link","prototype","call","replace","base","slice","target","length","undefined","prop","configurable","_linked","fetch","queries","action","type","options","args","resourceCache","_fetch","typeOptions","dataCache","prefetched","result","data","linkageCache","include","relationships","includedCache","included","flow","map","reduce","split","pop","fetchIncluded","ids","filter","id","PromiseTree","console","dir","depth","Infinity","cache","extract","array","typeCache","values","concat","forMany","forSingleOrMany","f","arguments","Array","isArray","apply","forEachResourceIdentifier","transformIds","alias","extractIncluded","from","assignIncluded","includeOptions","relationshipsOptions","resourceIds","_source","resourceId","_include","linksCache","JsonApi","_connected","connect","_createTypeError","Function","forEach","key","_wrappedPreTransform","preTransform","prefetch","query","once","called","_createPromiseTree","paths","tree","_path","targetNode","node","resolve","then","resolved","_resolvedTree","_resolvePromiseTree","rootNode","rejected","resolveSubnodes","all","catch","error","posttransform","sort","_sortByNumberOrCharCodes","vector","a","b","_sortByKey","rule","_parseSortRules","string","applySort","res","attributes","assignAlias","fullPath","obj","_omitProps","_alias","aliased","push","source","defaults","merge","fields","rootAttributes","RESOURCE_PROPS","RESOURCE_IDENTIFIER_PROPS","ADDITIONAL_RESOURCE_PROPS"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import get from 'lodash/get'\nimport set from 'lodash/setWith'\n\nexport class IndexedCache {\n  constructor() {\n    Object.defineProperty(this, '_cache', {\n      enumerable: true,\n      value: {}\n    })\n  }\n\n  keys() {\n    return Object.keys(this._cache)\n  }\n\n  set(path, value) {\n    set(this._cache, path, value, Object)\n\n    return this\n  }\n\n  get(path) {\n    return get(this._cache, path)\n  }\n}\n\nexport class LinkedIndexedCache extends IndexedCache {\n  constructor(indexedCache) {\n    super()\n\n    if(!indexedCache instanceof IndexedCache) {\n      throw TypeError('First arguments should be an instance of IndexedCache')\n    }\n\n    Object.defineProperty(this, '_linked', {\n      // enumerable: true,\n      value: indexedCache\n    })\n  }\n\n  set(path, value) {\n    this.link(path)\n\n    return IndexedCache.prototype.set.call(this, path, value)\n  }\n\n  link(path) {\n    if(typeof path === 'string') {\n      path = path.replace('.', )\n    }\n\n    const base = path.slice(0, -1)\n\n    let target\n\n    if (base.length) {\n      target = LinkedIndexedCache.prototype.get.call(this, base)\n\n      if(target === undefined) {\n        target = {}\n        IndexedCache.prototype.set.call(this, base, target)\n      }\n    } else {\n      target = this._cache\n    }\n\n    const prop = path[path.length - 1]\n\n    Object.defineProperty(target, prop, {\n      enumerable: true,\n      configurable: true,\n      set: value => {\n        this._linked.set(path, value)\n      },\n      get: () => this._linked.get(path)\n    })\n\n    if(!target[prop]) {\n      target[prop] = undefined\n    }\n\n    return this\n  }\n}\n","import merge from 'lodash/merge'\n\nimport {\n  IndexedCache,\n  LinkedIndexedCache\n} from './cache'\nimport prefetch from './prefetch'\nimport include from './include'\nimport posttransform from './transform/post'\nimport PromiseTree from './promiseTree'\n\nimport {\n  cache,\n  extract\n} from './helpers/cache'\n\nexport default async function fetch(queries, action, type, options, ...args) {\n  const resourceCache = new IndexedCache()\n\n  async function _fetch(type, typeOptions, resourceCache) {\n    const dataCache = new LinkedIndexedCache(resourceCache)\n\n    const prefetched = await prefetch(queries[type][action], typeOptions, ...args)\n\n    // add primary resources to indexed resource cache\n    const result = {}\n    cache(prefetched.data, dataCache)\n    result.dataCache = dataCache\n\n    if ('include' in typeOptions) {\n      // assign primary data links to included resources\n\n      const linkageCache = new LinkedIndexedCache(resourceCache)\n      include(prefetched.data, typeOptions.include, typeOptions.relationships, linkageCache)\n\n      result.linkageCache = linkageCache\n\n      if ('included' in prefetched) {\n        // add included resources to indexed resource cache\n\n        const includedCache = new LinkedIndexedCache(resourceCache)\n        cache(prefetched.included, includedCache)\n        result.includedCache = includedCache\n      }\n    }\n\n    return result\n  }\n\n  const typeOptions = options[type]\n\n  const flow = [type, ...(typeOptions.include || []).map(path => type + '.' + path)].reduce((flow, path) => {\n    const type = path.split('.').pop()\n    let typeOptions = options[type]\n\n    flow[path] = async (result = {}, fetchIncluded) => {\n      if (result.includedCache) {\n        return result\n      }\n\n      if (result.linkageCache) {\n        const ids = result.linkageCache.get(type).keys()\n        typeOptions = Object.assign({}, typeOptions)\n        typeOptions.filter = merge({}, typeOptions.filter, {\n          id: ids\n        })\n      }\n\n      result = await _fetch(type, typeOptions, result.linkageCache || resourceCache)\n\n      await fetchIncluded()\n\n      return result\n    }\n\n    return flow\n  }, {})\n\n  const result = await new PromiseTree(flow)\n\n  const {\n    dataCache,\n    includedCache,\n    linkageCache\n  } = result[type]\n\n  let data = extract(dataCache)\n  let included = extract(linkageCache)\n  data = posttransform(data, typeOptions)\n\n  console.dir(data, {\n    depth: Infinity\n  })\n\n  console.dir(included, {\n    depth: Infinity\n  })\n\n  return {\n    data,\n    included\n  }\n}\n","import {\n  forSingleOrMany\n} from './wrapFor'\n\nimport { IndexedCache } from '../cache'\n\nexport const cache = forSingleOrMany((data, indexedCache) => {\n  if(data) {\n    indexedCache.set([data.type, data.id], data)\n  }\n})\n\nexport const extract = indexedCache => {\n  if(!(indexedCache instanceof IndexedCache)) {\n    return null\n  }\n\n  return indexedCache.keys().reduce((array, type) => {\n    const typeCache = indexedCache.get(type)\n    const values = Object.values(typeCache)\n    return array.concat(values)\n  }, [])\n}\n","export function forMany(f) {\n  return function() {\n    const data = arguments[0]\n    if (Array.isArray(data)) {\n      return f.apply(this, args)\n    }\n    return data\n  }\n}\n\nexport function forSingleOrMany(f) {\n  return function(data, ...args) {\n    if (Array.isArray(data)) {\n      return data.map(data => f.apply(this, [data, ...args])).filter(data => !(data === undefined || data === null))\n    } else {\n      return f.apply(this, arguments)\n    }\n    return data\n  }\n}\n","import get from 'lodash/get'\n\nimport alias from '../transform/pre/alias'\n\nimport {\n  IndexedCache,\n  LinkedIndexedCache\n} from '../cache'\n\nimport {\n  forSingleOrMany\n} from '../helpers/wrapFor'\n\nconst forEachResourceIdentifier = forSingleOrMany((data, f) => {\n  if(data && !(data.id === undefined || data.id === null)) {\n    f(data)\n  }\n})\n\nconst transformIds = forSingleOrMany((data, options) => {\n  if('alias' in options) {\n    data = alias(data, options.alias)\n  }\n\n  return data\n})\n\nconst extractIncluded = (data, options) => {\n  if('from' in options) {\n    data = get(data, options.from)\n  }\n\n  data = transformIds(data, options)\n\n  return data\n}\n\nconst assignIncluded = forSingleOrMany((data, includeOptions, relationshipsOptions, cache) => {\n  if (data) {\n    Object.defineProperty(data, '_include', {\n      enumerable: true,\n      value: new LinkedIndexedCache(cache)\n    })\n\n    for (let type of includeOptions) {\n      const typeOptions = relationshipsOptions[type]\n\n      let resourceIds = extractIncluded(data._source, typeOptions)\n\n      forEachResourceIdentifier(resourceIds, resourceId => {\n        data._include.link([type, resourceId.id])\n      })\n    }\n  }\n})\n\nexport default async function include(data, includeOptions, relationshipsOptions, linksCache) {\n  assignIncluded(data, includeOptions, relationshipsOptions, linksCache)\n}\n","import get from 'lodash/get'\nimport set from 'lodash/set'\n\nimport preFetch from './prefetch'\nimport include from './include'\nimport fetch from './fetch'\n\nclass JsonApi {\n  constructor(options = {}) {\n    this.options = {}\n    this._connected = {}\n  }\n\n  connect(type, fetch) {\n    const keys = [\n      'create',\n      'read',\n      'update',\n      'delete'\n    ]\n    const _createTypeError = () => new TypeError('Invalid argument type for fetch')\n    const _fetch = {}\n    if (fetch instanceof Function) {\n      keys.forEach(key => _fetch[key] = fetch)\n    } else if (fetch instanceof Object) {\n      keys.forEach(key => {\n        if (!_fetch[key] instanceof Function) {\n          throw _createTypeError()\n        }\n        _fetch[key] = fetch[key]\n      })\n    } else {\n      throw _createTypeError()\n    }\n\n    this._connected[type] = _fetch\n  }\n\n  fetch(action, type, options, ...args) {\n    return fetch(this._connected, action, type, options, ...args)\n  }\n}\n\nexport default JsonApi\n","import preTransform from './transform/pre'\n\nimport { forSingleOrMany } from './helpers/wrapFor'\n\nconst _wrappedPreTransform = forSingleOrMany(preTransform)\n\nexport default async function prefetch(query, options, ...args) {\n  let {\n    data,\n    included\n  } = await query(options, ...args)\n\n  data = _wrappedPreTransform(data, options)\n\n  return {\n    data,\n    included\n  }\n}\n","function once(f) {\n  let called = false\n\n  return function() {\n    if (!called) {\n      called = true\n      return f.apply(this, arguments)\n    }\n  }\n}\n\nfunction _createPromiseTree(paths) {\n  if (typeof paths !== 'object') {\n    throw new TypeError(`First argument should be object`)\n  }\n\n  const tree = Object.entries(paths)\n    .reduce((tree, [path, value]) => {\n      const _path = path\n      if (typeof path === 'string') {\n        path = path.split('.')\n      }\n\n      const length = path.length\n\n      const targetNode = path.reduce((node, key) => {\n        if (!('resolve' in node)) {\n          node.resolve = null\n        }\n\n        if (!node.then) {\n          node.then = {}\n        }\n\n        if (!(key in node.then)) {\n          node.then[key] = {}\n        }\n\n        return node.then[key]\n      }, tree)\n\n      Object.defineProperties(targetNode, {\n        path: {\n          value: path\n        },\n        resolved: {\n          get() {\n            return tree._resolvedTree[_path]\n          },\n          set(value) {\n            tree._resolvedTree[_path] = value\n          }\n        }\n      })\n      targetNode.resolve = value\n      if (!targetNode.then) {\n        targetNode.then = null\n      }\n\n      return tree\n    }, {})\n\n  Object.defineProperty(tree, '_resolvedTree', {\n    value: {}\n  })\n\n  return tree\n}\n\nfunction _resolvePromiseTree(result, node, rootNode = node) {\n  if (rootNode.rejected) {\n    return rootNode.rejected\n  }\n\n  return Promise.resolve(result)\n    .then(result => {\n      const resolveSubnodes = once(() => {\n        if (node.then) {\n          return Promise.all(\n            Object.keys(node.then)\n            .map(key => {\n              return _resolvePromiseTree(result, node.then[key], rootNode)\n            })\n          ).then(() => result)\n        }\n\n        return result\n      })\n\n      if (node.resolve) {\n        return node.resolve(result, resolveSubnodes)\n      } else {\n        return resolveSubnodes()\n      }\n    })\n    .then(result => {\n      node.resolved = result\n      return rootNode._resolvedTree\n    })\n    .catch(error => {\n      node.rejected = error\n      throw error\n    })\n}\n\nexport default function PromiseTree(paths, result) {\n  const tree = _createPromiseTree(paths)\n\n  let rejected, set = false\n\n  Object.defineProperty(tree, 'rejected', {\n    get() {\n      return rejected\n    },\n    set(value) {\n      if (!set) {\n        set = true\n        rejected = value\n      }\n    }\n  })\n\n  return _resolvePromiseTree(result, tree)\n}\n","import {\n  forMany\n} from '../../helpers/wrapFor'\n\n// import paginate from './paginate'\nimport sort from './sort'\n\nconst posttransform = (data, typeOptions) => {\n  if('sort' in typeOptions) {\n    data = sort(data, typeOptions.sort)\n  }\n\n  // if('page' in typeOptions) {\n  //   data = paginate(data, typeOptions.page)\n  // }\n\n  return data\n}\n\nexport default posttransform\n","import get from 'lodash/get'\n\nfunction _sortByNumberOrCharCodes(vector, a, b) {\n  if (a > b) {\n    return vector\n  } else if (a < b) {\n    return -1 * vector\n  }\n\n  return 0\n}\n\nfunction _sortByKey(rule, a, b) {\n  const [key, vector] = rule\n  return _sortByNumberOrCharCodes(vector, get(a, key), get(b, key))\n}\n\nfunction _parseSortRules(options) {\n\n  return string.split(',')\n}\n\nconst applySort = (data, options) => {\n  if(typeof options === 'string') {\n    options = options.split(',')\n  }\n\n  if(!Array.isArray(options)) {\n    throw new TypeError('Sort options should be an array or string')\n  }\n\n  options = options.map(rule => {\n    if(typeof rule === 'string') {\n      rule = (rule[0] == '-') ? [rule.slice(1), -1] : [rule, 1]\n    }\n\n    if(!Array.isArray(rule)) {\n      throw new TypeError('Sort rules should be an array or string')\n    }\n\n    if(typeof rule[1] !== 'number') {\n      throw new TypeError('Sort order should be a number')\n    }\n\n    return rule\n  })\n\n  return data.sort((a, b) => {\n    if('attributes' in a && 'attributes' in b) {\n      for (let rule of options) {\n        const res = _sortByKey(rule, a.attributes, b.attributes)\n\n        if (res) {\n          return res\n        }\n      }\n    }\n\n    return 0\n  })\n}\n\nexport default applySort\n","import omit from 'lodash/omit'\nimport set from 'lodash/set'\nimport get from 'lodash/get'\n\nfunction assignAlias(data, alias, fullPath) {\n  if (typeof alias == 'string') {\n    return alias.length ? get(data, alias) : data\n  } else {\n    let obj = Array.isArray(alias) ? [] : Object.assign({}, data)\n\n    if (typeof alias == 'object') {\n      const _omitProps = []\n\n      for (let key in alias) {\n        const path = fullPath + key\n\n        let _alias = alias[key]\n\n        const aliased = assignAlias(data, _alias, path)\n\n        if (path != _alias) {\n          _omitProps.push(_alias)\n        }\n\n        set(obj, key, aliased)\n      }\n\n      if(_omitProps.length) {\n        obj = omit(obj, _omitProps)\n      }\n    }\n\n    return obj\n  }\n}\n\nexport default (data, options) => assignAlias(data, options, '')\n","export default (data, source) => {\n  Object.defineProperty(data, '_source', {\n    value: source\n  })\n}\n","import merge from 'lodash/merge'\nimport defaults from 'lodash/defaults'\nimport pick from 'lodash/pick'\nimport get from 'lodash/get'\n\nimport assignAlias from './alias'\nimport rootMembers from './rootMembers'\nimport defineSourceProp from './defineSourceProp'\n\nconst preTransform = (data, options) => {\n  let source = data\n\n  if('from' in options) {\n    data = get(data, options.from)\n  }\n\n  if ('alias' in options) {\n    data = assignAlias(data, options.alias)\n  }\n\n  data = rootMembers(data)\n\n  defineSourceProp(data, source)\n\n  if ('defaults' in options) {\n    defaults(data, options.defaults)\n  }\n\n  if ('merge' in options) {\n    merge(data, options.merge)\n  }\n\n  if ('fields' in options) {\n    data.attributes = pick(data.attributes, options.fields)\n  }\n\n  return data\n}\n\nexport default preTransform\n","import omit from 'lodash/omit'\nimport pick from 'lodash/pick'\nimport defaults from 'lodash/defaults'\n\nimport {\n  RESOURCE_PROPS\n} from '../resourceProps'\n\nexport default data => {\n  const rootAttributes = omit(data, RESOURCE_PROPS)\n\n  if (Object.keys(rootAttributes)) {\n    defaults(data, {\n      attributes: rootAttributes\n    })\n  }\n\n  data = pick(data, RESOURCE_PROPS)\n\n  return data\n}\n","export const RESOURCE_IDENTIFIER_PROPS = ['id', 'type', 'meta']\nexport const ADDITIONAL_RESOURCE_PROPS = ['attributes', 'relationships', 'links']\nexport const RESOURCE_PROPS = [\n  ...RESOURCE_IDENTIFIER_PROPS,\n  ...ADDITIONAL_RESOURCE_PROPS\n]\n","module.exports = require(\"babel-runtime/core-js/object/assign\");","module.exports = require(\"babel-runtime/core-js/object/define-properties\");","module.exports = require(\"babel-runtime/core-js/object/define-property\");","module.exports = require(\"babel-runtime/core-js/object/entries\");","module.exports = require(\"babel-runtime/core-js/object/keys\");","module.exports = require(\"babel-runtime/core-js/object/values\");","module.exports = require(\"babel-runtime/core-js/promise\");","module.exports = require(\"lodash/defaults\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"lodash/omit\");","module.exports = require(\"lodash/pick\");","module.exports = require(\"lodash/set\");","module.exports = require(\"lodash/setWith\");"],"sourceRoot":""}