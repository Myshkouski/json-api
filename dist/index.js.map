{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./src/mapValidationErrors.js","webpack:///./src/paginationStrategies.js","webpack:///./src/schemas.yaml","webpack:///./src/validate.js","webpack:///external \"ajv\"","webpack:///external \"ajv-errors\"","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"babel-runtime/core-js/object/define-property\"","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"json8-patch\"","webpack:///external \"lodash/cloneDeep\"","webpack:///external \"lodash/defaultsDeep\"","webpack:///external \"lodash/get\"","webpack:///external \"lodash/merge\"","webpack:///external \"lodash/omit\"","webpack:///external \"lodash/pick\"","webpack:///external \"lodash/set\""],"names":["pagination","_concatenateData","args","array","reduce","a","b","Array","isArray","concat","length","_wrapForSingleOrEvery","f","data","map","apply","slice","_wrapForManyOnly","_forEvery","_createIndex","_indexedCache","type","_include","forEach","id","_cacheIndex","_extractIndexedCache","_indexedCacheType","push","assignAlias","alias","fullPath","obj","key","path","_alias","aliased","_wrappedAssignAlias","_wrappedPick","assignDefaults","options","_sortByNumberOrCharCodes","reverse","_sortByKey","rule","_parseSortRules","string","split","_applySort","rules","sort","res","attributes","_applyAttributesFields","RESOURCE_IDENTIFIER_PROPS","_applyIncluded","cache","Object","defineProperty","enumerable","value","typeOptions","resourceIdentifiers","_source","resourceId","get","resourceMembers","_preTransform","_data","merge","defaults","fields","include","_applyPagination","body","strategy","offset","end","bounds","limit","query","ReferenceError","_postTransform","report","page","JsonApi","validate","ref","error","message","reasons","errors","doc","has","link","hrefOrLink","patch","ops","reversible","detail","validatePatch","reverted","revert","add","op","getSchemas","schemas","schema","index","constructor","_connected","Error","connect","fetch","keys","_createTypeError","TypeError","_fetch","Function","action","_prefetch","included","_fetchArgs","all","fetchArgs","fetched","dataPath","parentSchema","$id","parsePaginationQueryParam","param","parseInt","isNaN","Math","floor","tranformPaginationQuery","clientLimit","serverLimit","Infinity","_offset","_limit","self","_end","next","prev","first","last","ajv","verbose","allErrors","jsonPointers","addSchema","addShema","refs","_schemas"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AAIA;;;;AAEA;;IAAYA,U;;;;;;AAEZ,SAASC,gBAAT,CAA0B,GAAGC,IAA7B,EAAmC;AACjC,QAAMC,QAAQD,KAAKE,MAAL,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAClC,QAAIC,MAAMC,OAAN,CAAcF,CAAd,CAAJ,EAAsB;AACpB,aAAOD,EAAEI,MAAF,CAASH,CAAT,CAAP;AACD,KAFD,MAEO;AACL,aAAOD,EAAEI,MAAF,CAAS,CAACH,CAAD,CAAT,CAAP;AACD;AACF,GANa,EAMX,EANW,CAAd;;AAQA,SAAOH,MAAMO,MAAN,GAAeP,KAAf,GAAuB,IAA9B;AACD;;AAED,SAASQ,qBAAT,CAA+BC,CAA/B,EAAkC;AAChC,SAAO,UAAS,GAAGV,IAAZ,EAAkB;AACvB,UAAMW,OAAOX,KAAK,CAAL,CAAb;AACA,QAAIK,MAAMC,OAAN,CAAcK,IAAd,CAAJ,EAAyB;AACvB,aAAOA,KAAKC,GAAL,CAASD,QAAQD,EAAEG,KAAF,CAAQ,IAAR,EAAc,CAACF,IAAD,EAAO,GAAGX,KAAKc,KAAL,CAAW,CAAX,CAAV,CAAd,CAAjB,CAAP;AACD,KAFD,MAEO,IAAI,OAAOH,IAAP,IAAe,QAAnB,EAA6B;AAClC,aAAOD,EAAEG,KAAF,CAAQ,IAAR,EAAcb,IAAd,CAAP;AACD;AACF,GAPD;AAQD;;AAED,SAASe,gBAAT,CAA0BL,CAA1B,EAA6B;AAC3B,SAAO,UAAS,GAAGV,IAAZ,EAAkB;AACvB,UAAMW,OAAOX,KAAK,CAAL,CAAb;AACA,QAAIK,MAAMC,OAAN,CAAcK,IAAd,CAAJ,EAAyB;AACvB,aAAOD,EAAEG,KAAF,CAAQ,IAAR,EAAc,CAACF,IAAD,EAAO,GAAGX,KAAKc,KAAL,CAAW,CAAX,CAAV,CAAd,CAAP;AACD;;AAED,WAAOH,IAAP;AACD,GAPD;AAQD;;AAED,MAAMK,YAAYP,sBAAsB,CAACE,IAAD,EAAOD,CAAP,KAAaA,EAAEC,IAAF,CAAnC,CAAlB;;AAEA,MAAMM,eAAeR,sBAAsB,CAACE,IAAD,EAAOO,gBAAgB,EAAvB,KAA8B;AACvE,OAAK,IAAIC,IAAT,IAAiBR,KAAKS,QAAtB,EAAgC;AAC9B,gCAASF,aAAT,EAAwB;AACtB,OAACC,IAAD,GAAQ;AADc,KAAxB;AAGA,wBAAYR,KAAKS,QAAL,CAAcD,IAAd,CAAZ,EAAiCE,OAAjC,CAAyCC,MAAM,mBAAIJ,aAAJ,EAAmB,CAACC,IAAD,EAAOG,EAAP,CAAnB,CAA/C;AACD;AACF,CAPoB,CAArB;;AASA,MAAMC,cAAcd,sBAAsB,CAACE,IAAD,EAAOO,gBAAgB,EAAvB,KAA8B;AACtE,qBAAIA,aAAJ,EAAmB,CAACP,KAAKQ,IAAN,EAAYR,KAAKW,EAAjB,CAAnB,EAAyCX,IAAzC;AACD,CAFmB,CAApB;;AAIA,SAASa,oBAAT,CAA8BN,aAA9B,EAA6C;AAC3C,QAAMjB,QAAQ,EAAd;AACA,OAAI,IAAIkB,IAAR,IAAgBD,aAAhB,EAA+B;AAC7B,UAAMO,oBAAoBP,cAAcC,IAAd,CAA1B;AACA,SAAI,IAAIG,EAAR,IAAcG,iBAAd,EAAiC;AAC/BxB,YAAMyB,IAAN,CAAWD,kBAAkBH,EAAlB,CAAX;AACD;AACF;AACD,SAAOrB,KAAP;AACD;;AAED,SAAS0B,WAAT,CAAqBhB,IAArB,EAA2BiB,KAA3B,EAAkCC,QAAlC,EAA4C;AAC1C,MAAI,OAAOD,KAAP,IAAgB,QAApB,EAA8B;AAC5B,WAAOA,MAAMpB,MAAN,GAAe,mBAAIG,IAAJ,EAAUiB,KAAV,CAAf,GAAkCjB,IAAzC;AACD,GAFD,MAEO;AACL,QAAImB,GAAJ;AACA,QAAIzB,MAAMC,OAAN,CAAcsB,KAAd,CAAJ,EAA0B;AACxBE,YAAM,EAAN;AACD,KAFD,MAEO;AACLA,YAAM,sBAAc,EAAd,EAAkBnB,IAAlB,CAAN;AACD;;AAED,QAAI,OAAOiB,KAAP,IAAgB,QAApB,EAA8B;AAC5B,WAAK,IAAIG,GAAT,IAAgBH,KAAhB,EAAuB;AACrB,cAAMI,OAAO,CAACH,YAAY,EAAb,IAAmBE,GAAhC;;AAEA,YAAIE,SAASL,MAAMG,GAAN,CAAb;;AAEA,cAAMG,UAAUP,YAAYhB,IAAZ,EAAkBsB,MAAlB,EAA0BD,IAA1B,CAAhB;;AAEA,YAAIA,QAAQC,MAAZ,EAAoB;AAClBH,gBAAM,oBAAKA,GAAL,EAAU,CAACG,MAAD,CAAV,CAAN;AACD;;AAED,2BAAIH,GAAJ,EAASC,GAAT,EAAcG,OAAd;AACD;AACF;;AAED,WAAOJ,GAAP;AACD;AACF;;AAED,MAAMK,sBAAsB1B,sBAAsBkB,WAAtB,CAA5B;AACA,MAAMS,eAAe3B,qCAArB;;AAEA,SAAS4B,cAAT,CAAwB1B,IAAxB,EAA8B2B,OAA9B,EAAuC;AACrC,SAAO,4BAAS,EAAT,EAAa3B,IAAb,EAAmB2B,OAAnB,CAAP;AACD;;AAED,SAASC,wBAAT,CAAkCC,OAAlC,EAA2CrC,CAA3C,EAA8CC,CAA9C,EAAiD;AAC/C,MAAID,IAAIC,CAAR,EAAW;AACT,WAAOoC,OAAP;AACD,GAFD,MAEO,IAAIrC,IAAIC,CAAR,EAAW;AAChB,WAAO,CAAC,CAAD,GAAKoC,OAAZ;AACD;;AAED,SAAO,CAAP;AACD;;AAED,SAASC,UAAT,CAAoBC,IAApB,EAA0BvC,CAA1B,EAA6BC,CAA7B,EAAgC;AAC9B,QAAM,CAAC2B,GAAD,EAAMS,OAAN,IAAiBE,IAAvB;AACA,SAAOH,yBAAyBC,OAAzB,EAAkC,mBAAIrC,CAAJ,EAAO4B,GAAP,CAAlC,EAA+C,mBAAI3B,CAAJ,EAAO2B,GAAP,CAA/C,CAAP;AACD;;AAED,SAASY,eAAT,CAAyBC,MAAzB,EAAiC;AAC/B,SAAOA,OAAOC,KAAP,CAAa,GAAb,EAAkBjC,GAAlB,CAAsBmB,OAAO;AAClC,UAAMW,OAAO,EAAb;AACA,QAAIX,IAAI,CAAJ,KAAU,GAAd,EAAmB;AACjBW,WAAK,CAAL,IAAUX,IAAIjB,KAAJ,CAAU,CAAV,CAAV;AACA4B,WAAK,CAAL,IAAU,CAAC,CAAX;AACD,KAHD,MAGO;AACLA,WAAK,CAAL,IAAUX,GAAV;AACAW,WAAK,CAAL,IAAU,CAAV;AACD;;AAID,WAAOA,IAAP;AACD,GAbM,CAAP;AAcD;;AAED,MAAMI,aAAa/B,iBAAiB,CAACJ,IAAD,EAAO2B,OAAP,KAAmB;AACrD,QAAMS,QAAQJ,gBAAgBL,OAAhB,CAAd;AACA,SAAO3B,KAAKqC,IAAL,CAAU,CAAC7C,CAAD,EAAIC,CAAJ,KAAU;AACzB,SAAK,IAAIsC,IAAT,IAAiBK,KAAjB,EAAwB;AACtB,YAAME,MAAMR,WAAWC,IAAX,EAAiBvC,EAAE+C,UAAnB,EAA+B9C,EAAE8C,UAAjC,CAAZ;;AAEA,UAAID,GAAJ,EAAS;AACP,eAAOA,GAAP;AACD;AACF;;AAED,WAAO,CAAP;AACD,GAVM,CAAP;AAWD,CAbkB,CAAnB;;AAeA,SAASE,sBAAT,CAAgCxC,IAAhC,EAAsC2B,OAAtC,EAA+C;AAC7CA,YAAUA,QAAQO,KAAR,CAAc,GAAd,CAAV;AACAlC,OAAKuC,UAAL,GAAkB,oBAAKvC,KAAKuC,UAAV,EAAsBZ,OAAtB,CAAlB;AACA,SAAO3B,IAAP;AACD;;AAED,MAAMyC,4BAA4B,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,CAAlC;;AAEA,SAASC,cAAT,CAAwB1C,IAAxB,EAA8B2C,QAAQ,EAAtC,EAA0ChB,OAA1C,EAAmD;AACjD,MAAI3B,IAAJ,EAAU;AACR4C,WAAOC,cAAP,CAAsB7C,IAAtB,EAA4B,UAA5B,EAAwC;AACtC8C,kBAAY,IAD0B;AAEtCC,aAAO;AAF+B,KAAxC;;AAKA,SAAK,IAAIvC,IAAT,IAAiBmB,OAAjB,EAA0B;AACxB,UAAIqB,cAAcrB,QAAQnB,IAAR,CAAlB;AACA,UAAIyC,sBAAsBjD,KAAKkD,OAA/B;AACA,UAAI,SAASF,WAAT,IAAwBA,YAAY5B,GAAZ,CAAgBvB,MAA5C,EAAoD;AAClDoD,8BAAsB,mBAAIjD,KAAKkD,OAAT,EAAkBF,YAAY5B,GAA9B,CAAtB;AACD;;AAED,UAAI,WAAW4B,WAAf,EAA4B;AAC1BC,8BAAsBzB,oBAAoByB,mBAApB,EAAyCD,YAAY/B,KAArD,CAAtB;AACD;;AAEDgC,4BAAsBxB,aAAawB,mBAAb,EAAkCR,yBAAlC,CAAtB;;AAEAzC,WAAKS,QAAL,CAAcD,IAAd,IAAsB,EAAtB;;AAEAH,gBAAU4C,mBAAV,EAA+BE,cAAc;AAC3C,sCAAsBnD,KAAKS,QAAL,CAAcD,IAAd,CAAtB,EAA2C2C,WAAWxC,EAAtD,EAA0D;AACxDmC,sBAAY,IAD4C;AAExDM,gBAAM;AACJ,mBAAO,mBAAIT,KAAJ,EAAW,CAACnC,IAAD,EAAO2C,WAAWxC,EAAlB,CAAX,CAAP;AACD;AAJuD,SAA1D;AAMD,OAPD;AAQD;AACF;;AAED,SAAOX,IAAP;AACD;;AAED,MAAMqD,kBAAkB,CAAC,IAAD,EAAO,MAAP,EAAe,YAAf,EAA6B,eAA7B,EAA8C,OAA9C,EAAuD,MAAvD,CAAxB;;AAEA,MAAMC,gBAAgBxD,sBAAsB,CAACyD,KAAD,EAAQZ,KAAR,EAAehB,OAAf,KAA2B;AACrE,MAAI3B,OAAOuD,KAAX;;AAEA,MAAI,WAAW5B,OAAf,EAAwB;AACtB3B,WAAOgB,YAAYhB,IAAZ,EAAkB2B,QAAQV,KAA1B,CAAP;AACD;;AAED,QAAMsB,aAAa,oBAAKvC,IAAL,EAAWqD,eAAX,CAAnB;;AAEA,MAAI,oBAAYd,UAAZ,CAAJ,EAA6B;AAC3B,gCAASvC,IAAT,EAAe;AACbuC;AADa,KAAf;AAGD;;AAEDvC,SAAO,oBAAKA,IAAL,EAAWqD,eAAX,CAAP;;AAEA,MAAI,QAAQrD,IAAZ,EAAkB;AAChBA,SAAKW,EAAL,IAAW,EAAX;AACD;;AAED,MAAI,WAAWgB,OAAf,EAAwB;AACtB3B,WAAO,qBAAMA,IAAN,EAAY2B,QAAQ6B,KAApB,CAAP;AACD;;AAED,MAAI,cAAc7B,OAAlB,EAA2B;AACzB3B,WAAO0B,eAAe1B,IAAf,EAAqB2B,QAAQ8B,QAA7B,CAAP;AACD;;AAED,MAAI,YAAY9B,OAAhB,EAAyB;AACvB3B,WAAOwC,uBAAuBxC,IAAvB,EAA6B2B,QAAQ+B,MAArC,CAAP;AACD;;AAEDd,SAAOC,cAAP,CAAsB7C,IAAtB,EAA4B,SAA5B,EAAuC;AACrCoD,UAAM;AACJ,aAAOG,KAAP;AACD;AAHoC,GAAvC;;AAMA,MAAI,aAAa5B,OAAjB,EAA0B;AACxBe,mBAAe1C,IAAf,EAAqB2C,KAArB,EAA4BhB,QAAQgC,OAApC;AACD;;AAED,SAAO3D,IAAP;AACD,CA5CqB,CAAtB;;AA8CA,MAAM4D,mBAAmBxD,iBAAiB,CAACJ,IAAD,EAAO2B,OAAP,EAAgBkC,IAAhB,KAAyB;AACjE,QAAMC,WAAW3E,WAAWwC,QAAQmC,QAAnB,CAAjB;;AAEA,MAAIA,QAAJ,EAAc;AACZ,UAAM;AACJC,YADI;AAEJC;AAFI,QAGFF,SAASG,MAAT,CAAgBjE,KAAKH,MAArB,EAA6B8B,QAAQoC,MAArC,EAA6CpC,QAAQuC,KAArD,CAHJ;AAMA,KAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,EAA0B,MAA1B,EAAkC,MAAlC,EAA0CxD,OAA1C,CAAkDU,OAAO;AACvD,UAAI,OAAO0C,SAAS1C,GAAT,CAAP,IAAwB,UAA5B,EAAwC;AACtC,cAAM+C,QAAQL,SAAS1C,GAAT,EAAcpB,KAAKH,MAAnB,EAA2BkE,MAA3B,EAAmCC,GAAnC,EAAwCrC,QAAQuC,KAAhD,CAAd;;AAEA;AACD;AACF,KAND;;AAQAlE,WAAOA,KAAKG,KAAL,CAAW4D,MAAX,EAAmBC,GAAnB,CAAP;;AAEA,QAAI,CAAChE,KAAKH,MAAV,EAAkB;AAChBG,aAAO,IAAP;AACD;AACF,GApBD,MAoBO;AACL,UAAM,IAAIoE,cAAJ,CAAmB,iCAAnB,EAAsDzC,QAAQmC,QAA9D,CAAN;AACD;;AAED,SAAO9D,IAAP;AACD,CA5BwB,CAAzB;;AA8BA,MAAMqE,iBAAiB,CAACrE,IAAD,EAAO2B,OAAP,EAAgB2C,MAAhB,KAA2B;AAChD,MAAI,UAAU3C,OAAd,EAAuB;AACrB3B,WAAOmC,WAAWnC,IAAX,EAAiB2B,QAAQU,IAAzB,CAAP;AACD;;AAED,MAAI,UAAUV,OAAd,EAAuB;AACrB3B,WAAO4D,iBAAiB5D,IAAjB,EAAuB2B,QAAQ4C,IAA/B,EAAqCD,MAArC,CAAP;AACD;;AAED,SAAOtE,IAAP;AACD,CAVD;;AAYA,MAAMwE,OAAN,CAAc;AACZ,SAAaC,QAAb,CAAsB,GAAGpF,IAAzB,EAA+B;AAAA;AAC7B,UAAIqF,MAAM,GAAV;AAAA,UACEb,OAAOxE,KAAK,CAAL,CADT;AAEA,UAAIA,KAAKQ,MAAL,GAAc,CAAlB,EAAqB;AACnB6E,cAAMrF,KAAK,CAAL,CAAN;AACAwE,eAAOxE,KAAK,CAAL,CAAP;AACD;;AAED,UAAI;AACF,eAAO,MAAM,wBAASqF,GAAT,EAAcb,IAAd,CAAb;AACD,OAFD,CAEE,OAAOc,KAAP,EAAc;AACd,cAAM;AACJC,mBAAU,kBADN;AAEJC,mBAASF,MAAMG,MAAN,CAAa7E,GAAb;AAFL,SAAN;AAID;AAf4B;AAgB9B;;AAED,SAAOmD,GAAP,CAAW2B,GAAX,EAAgB1D,IAAhB,EAAsB;AACpB,WAAO,qBAAU+B,GAAV,CAAc2B,GAAd,EAAmB1D,IAAnB,CAAP;AACD;;AAED,SAAO2D,GAAP,CAAWD,GAAX,EAAgB1D,IAAhB,EAAsB;AACpB,WAAO,qBAAU2D,GAAV,CAAcD,GAAd,EAAmB1D,IAAnB,CAAP;AACD;;AAED,SAAO4D,IAAP,CAAYC,UAAZ,EAAwB;AACtB,QAAID,OAAO,EAAX;AACA,QAAI,OAAOC,UAAP,IAAqB,QAAzB,EAAmC;AACjCD,aAAOC,UAAP;AACD,KAFD,MAEO,IAAI,OAAOA,UAAP,IAAqB,QAAzB,EAAmC;AACxCD,aAAO,yBAAUC,UAAV,CAAP;AACD,KAFM,MAEA;AACL,aAAO,IAAP;AACD;;AAED,WAAOD,IAAP;AACD;;AAED,SAAaE,KAAb,CAAmBtB,IAAnB,EAAyBuB,GAAzB,EAA8BzD,UAAU,EAAxC,EAA4C;AAAA;AAC1CA,gBAAU,4BAAS,EAAT,EAAaA,OAAb,EAAsB;AAC9B0D,oBAAY;AADkB,OAAtB,CAAV;;AAIA,UAAI/C,GAAJ;;AAEA,UAAI;AACF,YAAI;AACFA,gBAAM,qBAAUpC,KAAV,CAAgB2D,IAAhB,EAAsBuB,GAAtB,EAA2BzD,OAA3B,CAAN;AACD,SAFD,CAEE,OAAOgD,KAAP,EAAc;AACdA,gBAAMW,MAAN,GAAgB,yBAAhB;;AAEA,gBAAMX,KAAN;AACD;;AAED,YAAIhD,QAAQ4D,aAAZ,EAA2B;AACzB,cAAI;AACF,kBAAMf,QAAQC,QAAR,CAAiBnC,IAAIyC,GAArB,CAAN;AACD,WAFD,CAEE,OAAOJ,KAAP,EAAc;AACdA,kBAAMW,MAAN,GAAgB,yDAAhB;;AAEA,kBAAMX,KAAN;AACD;AACF;AACF,OAlBD,CAkBE,OAAOA,KAAP,EAAc;AACd,YAAIhD,QAAQ0D,UAAZ,EAAwB;AACtB,gBAAMG,WAAW,qBAAUC,MAAV,CAAiB5B,IAAjB,EAAuBvB,IAAImD,MAA3B,EAAmCV,GAApD;;AAEAJ,gBAAMI,GAAN,GAAYS,QAAZ;AACD;;AAEDb,cAAMS,GAAN,GAAYA,GAAZ;;AAEA,cAAMT,KAAN;AACD;;AAED,aAAOrC,GAAP;AArC0C;AAsC3C;;AAED,SAAaoD,GAAb,CAAiB7B,IAAjB,EAAuBxC,IAAvB,EAA6B0B,KAA7B,EAAoCpB,OAApC,EAA6C;AAAA;AAC3C,YAAMyD,MAAM,CAAC;AACXO,YAAI,KADO;AAEXtE,YAFW;AAGX0B;AAHW,OAAD,CAAZ;;AAMA,aAAO,MAAMyB,QAAQW,KAAR,CAActB,IAAd,EAAoBuB,GAApB,EAAyBzD,OAAzB,CAAb;AAP2C;AAQ5C;;AAED,SAAOiE,UAAP,GAAoB;AAClB,UAAMC,UAAU,2BAAhB;;AAEA,QAAIlE,QAAQhB,EAAR,IAAc,OAAlB,EAA2B;AACzBmF,aAAOnF,EAAP,GAAYoF,KAAZ;AACD,KAFD,MAEO;AACLD,aAAOnF,EAAP,GAAYkF,QAAQzE,GAAR,EAAaO,QAAQhB,EAArB,CAAZ;AACD;;AAEDmF,WAAOtF,IAAP,GAAcmB,QAAQnB,IAAtB;;AAEAsF,WAAOnF,EAAP,GAAYS,GAAZ;AACA0E,WAAOvD,UAAP,GAAoB,yBAAUsD,QAAQzE,GAAR,CAAV,CAApB;;AAEA9B,UAAMyB,IAAN,CAAW+E,MAAX;;AAEA,WAAOxG,KAAP;AACD;;AAED0G,cAAYrE,UAAU,EAAtB,EAA0B;AACxB,SAAKA,OAAL,GAAe,EAAf;AACA,SAAKsE,UAAL,GAAkB,EAAlB;;AAEA,QAAI,UAAUtE,OAAd,EAAuB;AACrB,UAAI,OAAOA,QAAQkC,IAAf,IAAuB,QAA3B,EAAqC;AACnC,cAAM,IAAIqC,KAAJ,CAAW,wCAAX,CAAN;AACD;AACD,WAAKrC,IAAL,GAAYlC,QAAQkC,IAApB;AACD,KALD,MAKO;AACL,WAAKA,IAAL,GAAY,EAAZ;AACD;;AAED,QAAI,mBAAmBlC,OAAvB,EAAgC;AAC9B,UAAI,OAAOA,QAAQ4D,aAAf,IAAgC,SAApC,EAA+C;AAC7C,cAAM,IAAIW,KAAJ,CAAW,qDAAX,CAAN;AACD;AACD,WAAKvE,OAAL,CAAa4D,aAAb,GAA6B5D,QAAQ4D,aAArC;AACD,KALD,MAKO;AACL,WAAK5D,OAAL,CAAa4D,aAAb,GAA6B,KAA7B;AACD;AACF;;AAED,QAAOlE,IAAP,EAAa;AACX,WAAOmD,QAAQpB,GAAR,CAAY,KAAKS,IAAjB,EAAuBxC,IAAvB,CAAP;AACD;;AAED2D,MAAI3D,IAAJ,EAAU;AACR,WAAOmD,QAAQQ,GAAR,CAAY,KAAKnB,IAAjB,EAAuBxC,IAAvB,CAAP;AACD;;AAEKoD,UAAN,GAAiB;AAAA;;AAAA;AACf,aAAO,MAAMD,QAAQC,QAAR,CAAiB,MAAKZ,IAAtB,CAAb;AADe;AAEhB;;AAEKsB,OAAN,CAAYC,GAAZ,EAAiB;AAAA;;AAAA;AACf,aAAO,MAAMZ,QAAQW,KAAR,CAAc,OAAKtB,IAAnB,EAAyBuB,GAAzB,EAA8B,OAAKzD,OAAnC,CAAb;AADe;AAEhB;;AAEK+D,KAAN,CAAUrE,IAAV,EAAgB0B,KAAhB,EAAuB;AAAA;;AAAA;AACrB,aAAO,MAAMyB,QAAQkB,GAAR,CAAY,OAAK7B,IAAjB,EAAuBxC,IAAvB,EAA6B0B,KAA7B,EAAoC,OAAKpB,OAAzC,CAAb;AADqB;AAEtB;;AAIDwE,UAAQ3F,IAAR,EAAc4F,KAAd,EAAqB;AACnB,UAAMC,OAAO,CAAC,QAAD,EAAW,MAAX,EAAmB,QAAnB,EAA6B,QAA7B,CAAb;AACA,UAAMC,mBAAmB,MAAM,IAAIC,SAAJ,CAAc,iCAAd,CAA/B;AACA,UAAMC,SAAS,EAAf;AACA,QAAIJ,iBAAiBK,QAArB,EAA+B;AAC7BJ,WAAK3F,OAAL,CAAaU,OAAOoF,OAAOpF,GAAP,IAAcgF,KAAlC;AACD,KAFD,MAEO,IAAIA,iBAAiBxD,MAArB,EAA6B;AAClCyD,WAAK3F,OAAL,CAAaU,OAAO;AAClB,YAAI,CAACoF,OAAOpF,GAAP,CAAD,YAAwBqF,QAA5B,EAAsC;AACpC,gBAAMH,kBAAN;AACD;AACDE,eAAOpF,GAAP,IAAcgF,MAAMhF,GAAN,CAAd;AACD,OALD;AAMD,KAPM,MAOA;AACL,YAAMkF,kBAAN;AACD;;AAED,SAAKL,UAAL,CAAgBzF,IAAhB,IAAwBgG,MAAxB;AACD;;AAEKJ,OAAN,CAAYM,MAAZ,EAAoBlG,IAApB,EAA0BmB,OAA1B,EAAmC,GAAGtC,IAAtC,EAA4C;AAAA;;AAAA;AAC1C,YAAMsH,YAAY,OAAKV,UAAL,CAAgBzF,IAAhB,CAAlB;;AAEA,UAAI;AACFR,YADE;AAEF4G;AAFE,UAGA,MAAMD,UAAUD,MAAV,EAAkB/E,QAAQnB,IAAR,CAAlB,EAAiC,GAAGnB,IAApC,CAHV;;AAKA,YAAMkB,gBAAgB,EAAtB;;AAEAP,aAAOsD,cAActD,IAAd,EAAoBO,aAApB,EAAmCoB,QAAQnB,IAAR,CAAnC,CAAP;AACAoG,iBAAWtD,cAAcsD,QAAd,EAAwBrG,aAAxB,EAAuCoB,OAAvC,CAAX;;AAEArB,mBAAaN,IAAb,EAAmBO,aAAnB;AACAK,kBAAYgG,QAAZ,EAAsBrG,aAAtB;;AAEA,YAAMsG,aAAa,oBAAYtG,aAAZ,EAA2BN,GAA3B,CAA+B,gBAAQ;AACxD,cAAM+C,cAAc,yBAAUrB,QAAQnB,IAAR,CAAV,CAApB;;AAEA,2BAAIwC,WAAJ,EAAiB,QAAjB,EAA2B;AACzBrC,cAAI,oBAAYJ,cAAcC,IAAd,CAAZ;AADqB,SAA3B;;AAIA,6BAAMwC,WAAN,EAAmB;AACjBQ,iBAAO;AACLhD;AADK;AADU,SAAnB;;AAMA,eAAO,CAACA,IAAD,EAAO,4BAAS;AACrB,WAACA,IAAD,GAAQwC;AADa,SAAT,EAEXrB,OAFW,CAAP,CAAP;AAGD,OAhBkB,CAAnB;;AAkBA,UAAIW,MAAM,MAAM,kBAAQwE,GAAR,CAAYD,WAAW5G,GAAX,CAAe;AAAA,eAAa,OAAKmG,KAAL,CAAWM,MAAX,EAAmB,GAAGK,SAAtB,EAAiC,GAAG1H,IAApC,CAAb;AAAA,OAAf,CAAZ,CAAhB;;AAEAiD,UAAI5B,OAAJ,CAAY,mBAAW;AACrBE,oBAAYoG,QAAQhH,IAApB,EAA0BO,aAA1B;AACAK,oBAAYoG,QAAQJ,QAApB,EAA8BrG,aAA9B;AACD,OAHD;;AAKAP,aAAOqE,eAAerE,IAAf,EAAqB2B,OAArB,CAAP;AACAiF,iBAAWvC,eAAexD,qBAAqBN,aAArB,CAAf,EAAoDoB,OAApD,CAAX;;AAEA,aAAO;AACL3B,YADK;AAEL4G;AAFK,OAAP;AA5C0C;AAgD3C;;AAEK5G,MAAN,CAAWQ,IAAX,EAAiB;AAAA;AAEhB;AAlOW;;AAqOd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;kBAEegE,O;;;;;;;;;;;;;;;;;;;kBCtjBAG,UAAU;AACvBC,WAASD,MAAMC,OADQ;AAEvBvD,QAAMsD,MAAMsC,QAFW;AAGvBnB,UAAQnB,MAAMuC,YAAN,CAAmBC;AAHJ,CAAV,C;;;;;;;;;;;;;;;;;;;ACAf,MAAMC,4BAA4BC,SAAS;AACzCA,UAAQC,SAASD,KAAT,CAAR;;AAEA,MAAIE,MAAMF,KAAN,CAAJ,EAAkB;AAChBA,YAAQ,CAAR;AACD,GAFD,MAEO;AACLA,YAAQG,KAAKC,KAAL,CAAWJ,KAAX,CAAR;AACD;;AAED,SAAOA,KAAP;AACD,CAVD;;AAYA,MAAMK,0BAA0B,CAAC7H,MAAD,EAASkE,MAAT,EAAiBG,KAAjB,KAA2B;AACzDH,WAASqD,0BAA0BrD,MAA1B,CAAT;AACAG,UAAQkD,0BAA0BlD,KAA1B,CAAR;;AAEA,MAAIH,SAAS,CAAb,EAAgB;AACdA,cAAUlE,MAAV;AACD;;AAED,MAAIkE,SAAS,CAAb,EAAgB;AACdA,aAAS,CAAT;AACD,GAFD,MAEO,IAAIA,UAAUlE,MAAd,EAAsB;AAC3BkE,aAASlE,MAAT;AACD;;AAED,MAAIqE,QAAQ,CAAZ,EAAe;AACbA,YAAQ,CAAR;AACD,GAFD,MAEO,IAAIH,SAASG,KAAT,GAAiBrE,MAArB,EAA6B;AAClCqE,YAAQrE,SAASkE,MAAjB;AACD;;AAED,SAAO;AACLA,UADK;AAELG;AAFK,GAAP;AAID,CAxBD;;AA0BO,MAAMH,0BAAS;AACpBG,QAAMyD,WAAN,EAAmBC,WAAnB,EAAgC;AAC9B,QAAI1D,QAAQkD,0BAA0BO,WAA1B,CAAZ;;AAEA,QAAIzD,SAAS,CAAT,IAAcA,QAAQ0D,WAA1B,EAAuC;AACrC1D,cAAQsD,KAAKC,KAAL,CAAWvD,KAAX,CAAR;AACD,KAFD,MAEO,IAAI0D,WAAJ,EAAiB;AACtB1D,cAAQ0D,WAAR;AACD,KAFM,MAEA;AACL1D,cAAQ2D,QAAR;AACD;;AAED,WAAO3D,KAAP;AACD,GAbmB;;AAepBD,SAAOpE,MAAP,EAAeiI,OAAf,EAAwBC,MAAxB,EAAgC;AAC9B,UAAM;AACJhE,YADI;AAEJG;AAFI,QAGFwD,wBAAwB7H,MAAxB,EAAgCiI,OAAhC,EAAyCC,MAAzC,CAHJ;;AAKA,WAAO;AACLhE,YADK;AAELC,WAAKD,SAASG;AAFT,KAAP;AAID,GAzBmB;AA0BpB8D,OAAKnI,MAAL,EAAaiI,OAAb,EAAsBG,IAAtB,EAA4BF,MAA5B,EAAoC;AAClC,UAAM;AACJhE,YADI;AAEJG;AAFI,QAGFwD,wBAAwB7H,MAAxB,EAAgCiI,OAAhC,EAAyCC,MAAzC,CAHJ;;AAKA,WAAO;AACLxD,YAAM;AACJR,cADI;AAEJG;AAFI;AADD,KAAP;AAMD,GAtCmB;AAuCpBgE,OAAKrI,MAAL,EAAaiI,OAAb,EAAsBG,IAAtB,EAA4BF,MAA5B,EAAoC;AAClC,UAAM;AACJhE,YADI;AAEJG;AAFI,QAGFwD,wBAAwB7H,MAAxB,EAAgCoI,IAAhC,EAAsCF,MAAtC,CAHJ;;AAKA,QAAI,CAAC7D,KAAL,EAAY;AACV,aAAO,IAAP;AACD;;AAED,WAAO;AACLH,YADK;AAELG;AAFK,KAAP;AAID,GArDmB;AAsDpBiE,QAAM,CAACtI,MAAD,EAASiI,OAAT,EAAkBG,IAAlB,EAAwBF,MAAxB,KAAmC;AACvC,UAAM;AACJhE,YADI;AAEJG;AAFI,QAGFwD,wBAAwBI,OAAxB,EAAiCA,UAAUC,MAA3C,EAAmDA,MAAnD,CAHJ;;AAKA,QAAI,CAAC7D,KAAL,EAAY;AACV,aAAO,IAAP;AACD;;AAED,WAAO;AACLH,YADK;AAELG;AAFK,KAAP;AAID,GApEmB;AAqEpBkE,SAAO,CAACvI,MAAD,EAASiI,OAAT,EAAkBG,IAAlB,EAAwBF,MAAxB,KAAmC;AACxC,UAAM;AACJhE,YADI;AAEJG;AAFI,QAGFwD,wBAAwB7H,MAAxB,EAAgC,CAAhC,EAAmCkI,SAASlI,MAAT,GAAkBA,MAAlB,GAA4BkI,SAASD,OAAT,IAAoBA,UAAU,CAA9B,GAAkCA,OAAlC,GAA4CC,MAA3G,CAHJ;;AAKA,WAAO;AACLhE,YADK;AAELG,aAAO6D;AAFF,KAAP;AAID,GA/EmB;AAgFpBM,QAAM,CAACxI,MAAD,EAASiI,OAAT,EAAkBG,IAAlB,EAAwBF,MAAxB,KAAmC;AACvC,UAAM;AACJhE,YADI;AAEJG;AAFI,QAGFwD,wBAAwB7H,MAAxB,EAAgC,IAAIkI,MAAJ,GAAalI,MAAb,GAAsBA,SAASkI,MAA/B,GAAyCA,SAASlI,MAAT,GAAmBoI,OAAOF,MAAP,GAAgBlI,MAAhB,GAAyBoI,IAAzB,GAAgCpI,SAASkI,MAA5D,GAAsE,CAA/I,EAAmJA,MAAnJ,CAHJ;;AAKA,WAAO;AACLhE,YADK;AAELG;AAFK,KAAP;AAID;AA1FmB,CAAf,C;;;;;;;;;;;ACtCP;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;;;;;;;;AChPA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMoE,MAAM,kBAAQ;AAClBzC,4BADkB;AAElB0C,WAAS,IAFS;AAGlBC,aAAW,IAHO;AAIlBC,gBAAc;AAJI,CAAR,CAAZ;AAMA,yBAAUH,GAAV,EAAe,EAAf;;AAEO,MAAM7D,8BAAW,CAACC,GAAD,EAAM1E,IAAN,KAAesI,IAAI7D,QAAJ,CAAaC,GAAb,EAAkB1E,IAAlB,CAAhC;AACA,MAAM0I,gCAAY7C,WAAWyC,IAAIK,QAAJ,CAAa7C,MAAb,CAA7B;AACA,MAAMF,kCAAagD,QAAQ;AAChC,QAAM/C,UAAU,EAAhB;;AAEA,OAAI,IAAIzE,GAAR,IAAekH,IAAIO,QAAnB,EAA6B;AAC3BhD,YAAQzE,GAAR,IAAekH,IAAIO,QAAJ,CAAazH,GAAb,EAAkB0E,MAAjC;AACD;;AAED,SAAOD,OAAP;AACD,CARM,C;;;;;;;;;;;ACdP,gC;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,gD;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,uC","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import jsonPatch from 'json8-patch'\r\nimport defaults from 'lodash/defaultsDeep'\r\nimport cloneDeep from 'lodash/cloneDeep'\r\nimport get from 'lodash/get'\r\nimport set from 'lodash/set'\r\nimport pick from 'lodash/pick'\r\nimport omit from 'lodash/omit'\r\nimport merge from 'lodash/merge'\r\n\r\nimport {\r\n  validate,\r\n  getSchemas as _getSchemas\r\n} from './validate'\r\nimport mapValidationErrors from './mapValidationErrors'\r\n\r\nimport * as pagination from './paginationStrategies'\r\n\r\nfunction _concatenateData(...args) {\r\n  const array = args.reduce((a, b) => {\r\n    if (Array.isArray(b)) {\r\n      return a.concat(b)\r\n    } else {\r\n      return a.concat([b])\r\n    }\r\n  }, [])\r\n\r\n  return array.length ? array : null\r\n}\r\n\r\nfunction _wrapForSingleOrEvery(f) {\r\n  return function(...args) {\r\n    const data = args[0]\r\n    if (Array.isArray(data)) {\r\n      return data.map(data => f.apply(this, [data, ...args.slice(1)]))\r\n    } else if (typeof data == 'object') {\r\n      return f.apply(this, args)\r\n    }\r\n  }\r\n}\r\n\r\nfunction _wrapForManyOnly(f) {\r\n  return function(...args) {\r\n    const data = args[0]\r\n    if (Array.isArray(data)) {\r\n      return f.apply(this, [data, ...args.slice(1)])\r\n    }\r\n\r\n    return data\r\n  }\r\n}\r\n\r\nconst _forEvery = _wrapForSingleOrEvery((data, f) => f(data))\r\n\r\nconst _createIndex = _wrapForSingleOrEvery((data, _indexedCache = {}) => {\r\n  for (let type in data._include) {\r\n    defaults(_indexedCache, {\r\n      [type]: {}\r\n    })\r\n    Object.keys(data._include[type]).forEach(id => set(_indexedCache, [type, id]))\r\n  }\r\n})\r\n\r\nconst _cacheIndex = _wrapForSingleOrEvery((data, _indexedCache = {}) => {\r\n  set(_indexedCache, [data.type, data.id], data)\r\n})\r\n\r\nfunction _extractIndexedCache(_indexedCache) {\r\n  const array = []\r\n  for(let type in _indexedCache) {\r\n    const _indexedCacheType = _indexedCache[type]\r\n    for(let id in _indexedCacheType) {\r\n      array.push(_indexedCacheType[id])\r\n    }\r\n  }\r\n  return array\r\n}\r\n\r\nfunction assignAlias(data, alias, fullPath) {\r\n  if (typeof alias == 'string') {\r\n    return alias.length ? get(data, alias) : data\r\n  } else {\r\n    let obj\r\n    if (Array.isArray(alias)) {\r\n      obj = []\r\n    } else {\r\n      obj = Object.assign({}, data)\r\n    }\r\n\r\n    if (typeof alias == 'object') {\r\n      for (let key in alias) {\r\n        const path = (fullPath || '') + key\r\n\r\n        let _alias = alias[key]\r\n\r\n        const aliased = assignAlias(data, _alias, path)\r\n\r\n        if (path != _alias) {\r\n          obj = omit(obj, [_alias])\r\n        }\r\n\r\n        set(obj, key, aliased)\r\n      }\r\n    }\r\n\r\n    return obj\r\n  }\r\n}\r\n\r\nconst _wrappedAssignAlias = _wrapForSingleOrEvery(assignAlias)\r\nconst _wrappedPick = _wrapForSingleOrEvery(pick)\r\n\r\nfunction assignDefaults(data, options) {\r\n  return defaults({}, data, options)\r\n}\r\n\r\nfunction _sortByNumberOrCharCodes(reverse, a, b) {\r\n  if (a > b) {\r\n    return reverse\r\n  } else if (a < b) {\r\n    return -1 * reverse\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nfunction _sortByKey(rule, a, b) {\r\n  const [key, reverse] = rule\r\n  return _sortByNumberOrCharCodes(reverse, get(a, key), get(b, key))\r\n}\r\n\r\nfunction _parseSortRules(string) {\r\n  return string.split(',').map(key => {\r\n    const rule = []\r\n    if (key[0] == '-') {\r\n      rule[0] = key.slice(1)\r\n      rule[1] = -1\r\n    } else {\r\n      rule[0] = key\r\n      rule[1] = 1\r\n    }\r\n\r\n\r\n\r\n    return rule\r\n  })\r\n}\r\n\r\nconst _applySort = _wrapForManyOnly((data, options) => {\r\n  const rules = _parseSortRules(options)\r\n  return data.sort((a, b) => {\r\n    for (let rule of rules) {\r\n      const res = _sortByKey(rule, a.attributes, b.attributes)\r\n\r\n      if (res) {\r\n        return res\r\n      }\r\n    }\r\n\r\n    return 0\r\n  })\r\n})\r\n\r\nfunction _applyAttributesFields(data, options) {\r\n  options = options.split(',')\r\n  data.attributes = pick(data.attributes, options)\r\n  return data\r\n}\r\n\r\nconst RESOURCE_IDENTIFIER_PROPS = ['id', 'type', 'meta']\r\n\r\nfunction _applyIncluded(data, cache = {}, options) {\r\n  if (data) {\r\n    Object.defineProperty(data, '_include', {\r\n      enumerable: true,\r\n      value: {}\r\n    })\r\n\r\n    for (let type in options) {\r\n      let typeOptions = options[type]\r\n      let resourceIdentifiers = data._source\r\n      if ('key' in typeOptions && typeOptions.key.length) {\r\n        resourceIdentifiers = get(data._source, typeOptions.key)\r\n      }\r\n\r\n      if ('alias' in typeOptions) {\r\n        resourceIdentifiers = _wrappedAssignAlias(resourceIdentifiers, typeOptions.alias)\r\n      }\r\n\r\n      resourceIdentifiers = _wrappedPick(resourceIdentifiers, RESOURCE_IDENTIFIER_PROPS)\r\n\r\n      data._include[type] = {}\r\n\r\n      _forEvery(resourceIdentifiers, resourceId => {\r\n        Object.defineProperty(data._include[type], resourceId.id, {\r\n          enumerable: true,\r\n          get() {\r\n            return get(cache, [type, resourceId.id])\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nconst resourceMembers = ['id', 'type', 'attributes', 'relationships', 'links', 'meta']\r\n\r\nconst _preTransform = _wrapForSingleOrEvery((_data, cache, options) => {\r\n  let data = _data\r\n\r\n  if ('alias' in options) {\r\n    data = assignAlias(data, options.alias)\r\n  }\r\n\r\n  const attributes = omit(data, resourceMembers)\r\n\r\n  if (Object.keys(attributes)) {\r\n    defaults(data, {\r\n      attributes\r\n    })\r\n  }\r\n\r\n  data = pick(data, resourceMembers)\r\n\r\n  if ('id' in data) {\r\n    data.id += ''\r\n  }\r\n\r\n  if ('merge' in options) {\r\n    data = merge(data, options.merge)\r\n  }\r\n\r\n  if ('defaults' in options) {\r\n    data = assignDefaults(data, options.defaults)\r\n  }\r\n\r\n  if ('fields' in options) {\r\n    data = _applyAttributesFields(data, options.fields)\r\n  }\r\n\r\n  Object.defineProperty(data, '_source', {\r\n    get() {\r\n      return _data\r\n    }\r\n  })\r\n\r\n  if ('include' in options) {\r\n    _applyIncluded(data, cache, options.include)\r\n  }\r\n\r\n  return data\r\n})\r\n\r\nconst _applyPagination = _wrapForManyOnly((data, options, body) => {\r\n  const strategy = pagination[options.strategy]\r\n\r\n  if (strategy) {\r\n    const {\r\n      offset,\r\n      end\r\n    } = strategy.bounds(data.length, options.offset, options.limit)\r\n\r\n    ;\r\n    ['self', 'first', 'last', 'prev', 'next'].forEach(key => {\r\n      if (typeof strategy[key] == 'function') {\r\n        const query = strategy[key](data.length, offset, end, options.limit)\r\n\r\n        // set(body, `links.${ key }`, query)\r\n      }\r\n    })\r\n\r\n    data = data.slice(offset, end)\r\n\r\n    if (!data.length) {\r\n      data = null\r\n    }\r\n  } else {\r\n    throw new ReferenceError('Cannot use pagination strategy:', options.strategy)\r\n  }\r\n\r\n  return data\r\n})\r\n\r\nconst _postTransform = (data, options, report) => {\r\n  if ('sort' in options) {\r\n    data = _applySort(data, options.sort)\r\n  }\r\n\r\n  if ('page' in options) {\r\n    data = _applyPagination(data, options.page, report)\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nclass JsonApi {\r\n  static async validate(...args) {\r\n    let ref = '/',\r\n      body = args[0]\r\n    if (args.length > 1) {\r\n      ref = args[0]\r\n      body = args[1]\r\n    }\r\n\r\n    try {\r\n      return await validate(ref, body)\r\n    } catch (error) {\r\n      throw {\r\n        message: `Validation error`,\r\n        reasons: error.errors.map(mapValidationErrors)\r\n      }\r\n    }\r\n  }\r\n\r\n  static get(doc, path) {\r\n    return jsonPatch.get(doc, path)\r\n  }\r\n\r\n  static has(doc, path) {\r\n    return jsonPatch.has(doc, path)\r\n  }\r\n\r\n  static link(hrefOrLink) {\r\n    let link = {}\r\n    if (typeof hrefOrLink == 'string') {\r\n      link = hrefOrLink\r\n    } else if (typeof hrefOrLink == 'object') {\r\n      link = cloneDeep(hrefOrLink)\r\n    } else {\r\n      return null\r\n    }\r\n\r\n    return link\r\n  }\r\n\r\n  static async patch(body, ops, options = {}) {\r\n    options = defaults({}, options, {\r\n      reversible: false\r\n    })\r\n\r\n    let res\r\n\r\n    try {\r\n      try {\r\n        res = jsonPatch.apply(body, ops, options)\r\n      } catch (error) {\r\n        error.detail = `Cannot apply JSON patch`\r\n\r\n        throw error\r\n      }\r\n\r\n      if (options.validatePatch) {\r\n        try {\r\n          await JsonApi.validate(res.doc)\r\n        } catch (error) {\r\n          error.detail = `Document validation failed after patch has been applied`\r\n\r\n          throw error\r\n        }\r\n      }\r\n    } catch (error) {\r\n      if (options.reversible) {\r\n        const reverted = jsonPatch.revert(body, res.revert).doc\r\n\r\n        error.doc = reverted\r\n      }\r\n\r\n      error.ops = ops\r\n\r\n      throw error\r\n    }\r\n\r\n    return res\r\n  }\r\n\r\n  static async add(body, path, value, options) {\r\n    const ops = [{\r\n      op: 'add',\r\n      path,\r\n      value\r\n    }]\r\n\r\n    return await JsonApi.patch(body, ops, options)\r\n  }\r\n\r\n  static getSchemas() {\r\n    const schemas = _getSchemas()\r\n\r\n    if (options.id == 'index') {\r\n      schema.id = index\r\n    } else {\r\n      schema.id = schemas[key][options.id]\r\n    }\r\n\r\n    schema.type = options.type\r\n\r\n    schema.id = key\r\n    schema.attributes = cloneDeep(schemas[key])\r\n\r\n    array.push(schema)\r\n\r\n    return array\r\n  }\r\n\r\n  constructor(options = {}) {\r\n    this.options = {}\r\n    this._connected = {}\r\n\r\n    if ('body' in options) {\r\n      if (typeof options.body != 'object') {\r\n        throw new Error(`'options.body' should be a JSON object`)\r\n      }\r\n      this.body = options.body\r\n    } else {\r\n      this.body = {}\r\n    }\r\n\r\n    if ('validatePatch' in options) {\r\n      if (typeof options.validatePatch != 'boolean') {\r\n        throw new Error(`'options.validatePatch' should be 'true' or 'false'`)\r\n      }\r\n      this.options.validatePatch = options.validatePatch\r\n    } else {\r\n      this.options.validatePatch = false\r\n    }\r\n  }\r\n\r\n  \"get\" (path) {\r\n    return JsonApi.get(this.body, path)\r\n  }\r\n\r\n  has(path) {\r\n    return JsonApi.has(this.body, path)\r\n  }\r\n\r\n  async validate() {\r\n    return await JsonApi.validate(this.body)\r\n  }\r\n\r\n  async patch(ops) {\r\n    return await JsonApi.patch(this.body, ops, this.options)\r\n  }\r\n\r\n  async add(path, value) {\r\n    return await JsonApi.add(this.body, path, value, this.options)\r\n  }\r\n\r\n\r\n\r\n  connect(type, fetch) {\r\n    const keys = ['create', 'read', 'update', 'delete']\r\n    const _createTypeError = () => new TypeError('Invalid argument type for fetch')\r\n    const _fetch = {}\r\n    if (fetch instanceof Function) {\r\n      keys.forEach(key => _fetch[key] = fetch)\r\n    } else if (fetch instanceof Object) {\r\n      keys.forEach(key => {\r\n        if (!_fetch[key] instanceof Function) {\r\n          throw _createTypeError()\r\n        }\r\n        _fetch[key] = fetch[key]\r\n      })\r\n    } else {\r\n      throw _createTypeError()\r\n    }\r\n\r\n    this._connected[type] = _fetch\r\n  }\r\n\r\n  async fetch(action, type, options, ...args) {\r\n    const _prefetch = this._connected[type]\r\n\r\n    let {\r\n      data,\r\n      included\r\n    } = await _prefetch[action](options[type], ...args)\r\n\r\n    const _indexedCache = {}\r\n\r\n    data = _preTransform(data, _indexedCache, options[type])\r\n    included = _preTransform(included, _indexedCache, options)\r\n\r\n    _createIndex(data, _indexedCache)\r\n    _cacheIndex(included, _indexedCache)\r\n\r\n    const _fetchArgs = Object.keys(_indexedCache).map(type => {\r\n      const typeOptions = cloneDeep(options[type])\r\n\r\n      set(typeOptions, 'filter', {\r\n        id: Object.keys(_indexedCache[type])\r\n      })\r\n\r\n      merge(typeOptions, {\r\n        merge: {\r\n          type\r\n        }\r\n      })\r\n\r\n      return [type, defaults({\r\n        [type]: typeOptions\r\n      }, options)]\r\n    })\r\n\r\n    let res = await Promise.all(_fetchArgs.map(fetchArgs => this.fetch(action, ...fetchArgs, ...args)))\r\n\r\n    res.forEach(fetched => {\r\n      _cacheIndex(fetched.data, _indexedCache)\r\n      _cacheIndex(fetched.included, _indexedCache)\r\n    })\r\n\r\n    data = _postTransform(data, options)\r\n    included = _postTransform(_extractIndexedCache(_indexedCache), options)\r\n\r\n    return {\r\n      data,\r\n      included\r\n    }\r\n  }\r\n\r\n  async data(type) {\r\n\r\n  }\r\n}\r\n\r\n// function _createIndexPendingResources(data, cache) {\r\n//   if (Array.isArray(data)) {\r\n//     data.forEach(data => _createIndexPendingResources(data, cache))\r\n//   } else if (typeof data == 'object') {\r\n//     const {\r\n//       id,\r\n//       type\r\n//     } = data\r\n//\r\n//     if (!cache[type]) {\r\n//       cache[type] = []\r\n//     }\r\n//\r\n//     cache[type].push(id)\r\n//   }\r\n// }\r\n\r\n// function _extractPendingResourceTypeIds(type, cache) {\r\n//   if (!cache[type]) {\r\n//     return []\r\n//   }\r\n//\r\n//   const _typeCache = cache[type]\r\n//\r\n//   delete cache[type]\r\n//\r\n//   return _typeCache\r\n// }\r\n\r\n// function _filterCachedIds(type, ids, cache) {\r\n//   return ids.filter(id => {\r\n//     const type = cache[type]\r\n//\r\n//     if (type && type[id]) {\r\n//       return false\r\n//     }\r\n//\r\n//     return true\r\n//   })\r\n// }\r\n\r\nexport default JsonApi\r\n","export default error => ({\r\n  message: error.message,\r\n  path: error.dataPath,\r\n  schema: error.parentSchema.$id\r\n})\r\n","const parsePaginationQueryParam = param => {\r\n  param = parseInt(param)\r\n\r\n  if (isNaN(param)) {\r\n    param = 0\r\n  } else {\r\n    param = Math.floor(param)\r\n  }\r\n\r\n  return param\r\n}\r\n\r\nconst tranformPaginationQuery = (length, offset, limit) => {\r\n  offset = parsePaginationQueryParam(offset)\r\n  limit = parsePaginationQueryParam(limit)\r\n\r\n  if (offset < 0) {\r\n    offset += length\r\n  }\r\n\r\n  if (offset < 0) {\r\n    offset = 0\r\n  } else if (offset >= length) {\r\n    offset = length\r\n  }\r\n\r\n  if (limit < 0) {\r\n    limit = 0\r\n  } else if (offset + limit > length) {\r\n    limit = length - offset\r\n  }\r\n\r\n  return {\r\n    offset,\r\n    limit\r\n  }\r\n}\r\n\r\nexport const offset = {\r\n  limit(clientLimit, serverLimit) {\r\n    let limit = parsePaginationQueryParam(clientLimit)\r\n\r\n    if (limit >= 1 && limit < serverLimit) {\r\n      limit = Math.floor(limit)\r\n    } else if (serverLimit) {\r\n      limit = serverLimit\r\n    } else {\r\n      limit = Infinity\r\n    }\r\n\r\n    return limit\r\n  },\r\n\r\n  bounds(length, _offset, _limit) {\r\n    const {\r\n      offset,\r\n      limit\r\n    } = tranformPaginationQuery(length, _offset, _limit)\r\n\r\n    return {\r\n      offset,\r\n      end: offset + limit\r\n    }\r\n  },\r\n  self(length, _offset, _end, _limit) {\r\n    const {\r\n      offset,\r\n      limit\r\n    } = tranformPaginationQuery(length, _offset, _limit)\r\n\r\n    return {\r\n      page: {\r\n        offset,\r\n        limit\r\n      }\r\n    }\r\n  },\r\n  next(length, _offset, _end, _limit) {\r\n    const {\r\n      offset,\r\n      limit\r\n    } = tranformPaginationQuery(length, _end, _limit)\r\n\r\n    if (!limit) {\r\n      return null\r\n    }\r\n\r\n    return {\r\n      offset,\r\n      limit\r\n    }\r\n  },\r\n  prev: (length, _offset, _end, _limit) => {\r\n    const {\r\n      offset,\r\n      limit\r\n    } = tranformPaginationQuery(_offset, _offset - _limit, _limit)\r\n\r\n    if (!limit) {\r\n      return null\r\n    }\r\n\r\n    return {\r\n      offset,\r\n      limit\r\n    }\r\n  },\r\n  first: (length, _offset, _end, _limit) => {\r\n    const {\r\n      offset,\r\n      limit\r\n    } = tranformPaginationQuery(length, 0, _limit > length ? length : (_limit > _offset && _offset > 0 ? _offset : _limit))\r\n\r\n    return {\r\n      offset,\r\n      limit: _limit\r\n    }\r\n  },\r\n  last: (length, _offset, _end, _limit) => {\r\n    const {\r\n      offset,\r\n      limit\r\n    } = tranformPaginationQuery(length, 2 * _limit < length ? length - _limit : (_limit < length ? (_end + _limit < length ? _end : length - _limit) : 0), _limit)\r\n\r\n    return {\r\n      offset,\r\n      limit\r\n    }\r\n  }\r\n}\r\n","module.exports = [\n\t{\n\t\t\"$id\": \"/patch/document\",\n\t\t\"properties\": {\n\t\t\t\"testPropsDefault\": {\n\t\t\t\t\"default\": \"test\"\n\t\t\t},\n\t\t\t\"decoded\": {\n\t\t\t\t\"type\": \"array\"\n\t\t\t}\n\t\t},\n\t\t\"required\": [\n\t\t\t\"decoded\",\n\t\t\t\"doc\"\n\t\t],\n\t\t\"oneOf\": [\n\t\t\t{\n\t\t\t\t\"properties\": {\n\t\t\t\t\t\"testOneOfDefault\": {\n\t\t\t\t\t\t\"default\": \"test\"\n\t\t\t\t\t},\n\t\t\t\t\t\"decoded\": {\n\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"const\": \"data\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"pattern\": \"^((-)|([0-9])|([1-9][0-9]+))$\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t\"doc\": {\n\t\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\t\"data\": {\n\t\t\t\t\t\t\t\t\"default\": []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"$id\": \"/\",\n\t\t\"$async\": true,\n\t\t\"allOf\": [\n\t\t\t{\n\t\t\t\t\"anyOf\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\t\"data\"\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\t\"errors\"\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\t\"meta\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t\"errorMessage\": \"A document MUST contain at least one of the following top-level members: 'data', 'errors', 'meta'\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"not\": {\n\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\"errors\",\n\t\t\t\t\t\t\"data\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"errorMessage\": \"The members data and errors MUST NOT coexist in the same document\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"not\": {\n\t\t\t\t\t\"allOf\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"not\": {\n\t\t\t\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\t\t\t\"data\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\t\t\"included\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"errorMessage\": \"If a document does not contain a top-level 'data' key, the 'included' member MUST NOT be present either\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"type\": \"object\",\n\t\t\t\t\"properties\": {\n\t\t\t\t\t\"data\": {\n\t\t\t\t\t\t\"$ref\": \"/data\"\n\t\t\t\t\t},\n\t\t\t\t\t\"errors\": {\n\t\t\t\t\t\t\"$ref\": \"/errors\"\n\t\t\t\t\t},\n\t\t\t\t\t\"meta\": {\n\t\t\t\t\t\t\"$ref\": \"/meta\"\n\t\t\t\t\t},\n\t\t\t\t\t\"links\": {\n\t\t\t\t\t\t\"$ref\": \"/links\"\n\t\t\t\t\t},\n\t\t\t\t\t\"included\": {\n\t\t\t\t\t\t\"$ref\": \"/included\"\n\t\t\t\t\t},\n\t\t\t\t\t\"jsonapi\": {\n\t\t\t\t\t\t\"type\": \"object\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"additionalProperties\": false,\n\t\t\t\t\"errorMessage\": {\n\t\t\t\t\t\"type\": \"A JSON object MUST be at the root of every JSON API request and response containing data\",\n\t\t\t\t\t\"additionalProperties\": \"Unless otherwise noted, objects defined by this specification MUST NOT contain any additional members\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"$id\": \"/data\",\n\t\t\"oneOf\": [\n\t\t\t{\n\t\t\t\t\"$ref\": \"/resource\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"$ref\": \"/included\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"type\": \"null\"\n\t\t\t}\n\t\t],\n\t\t\"errorMessage\": \"Primary data MUST be either a single resource object, or a single resource identifier object, or null, for requests that target single resources, or an array of resource objects, or an array of resource identifier objects, or an empty array for requests that target resource collections\"\n\t},\n\t{\n\t\t\"$id\": \"/errors\",\n\t\t\"type\": \"array\",\n\t\t\"items\": {\n\t\t\t\"$ref\": \"/error\"\n\t\t},\n\t\t\"errorMessage\": {\n\t\t\t\"type\": \"Error objects MUST be returned as an array keyed by errors in the top level of a JSON API document\"\n\t\t}\n\t},\n\t{\n\t\t\"$id\": \"/links\",\n\t\t\"type\": \"object\",\n\t\t\"patternProperties\": {\n\t\t\t\"^.*\": {\n\t\t\t\t\"$ref\": \"/link\"\n\t\t\t}\n\t\t},\n\t\t\"additionalProperties\": false,\n\t\t\"errorMessage\": {\n\t\t\t\"type\": \"The value of each 'links' member MUST be an object\"\n\t\t}\n\t},\n\t{\n\t\t\"$id\": \"/included\",\n\t\t\"type\": \"array\",\n\t\t\"items\": {\n\t\t\t\"$ref\": \"/resource\"\n\t\t}\n\t},\n\t{\n\t\t\"$id\": \"/resource\",\n\t\t\"type\": \"object\",\n\t\t\"properties\": {\n\t\t\t\"id\": {\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"errorMessage\": \"The values of the 'id' member MUST be strings\"\n\t\t\t},\n\t\t\t\"type\": {\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"errorMessage\": \"The values of the 'type' member MUST be strings\"\n\t\t\t},\n\t\t\t\"meta\": {\n\t\t\t\t\"$ref\": \"/meta\"\n\t\t\t},\n\t\t\t\"attributes\": {\n\t\t\t\t\"type\": \"object\"\n\t\t\t},\n\t\t\t\"relationships\": {\n\t\t\t\t\"type\": \"array\",\n\t\t\t\t\"items\": {\n\t\t\t\t\t\"$ref\": \"/resource\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"links\": {\n\t\t\t\t\"$ref\": \"/links\"\n\t\t\t}\n\t\t},\n\t\t\"required\": [\n\t\t\t\"id\",\n\t\t\t\"type\"\n\t\t],\n\t\t\"additionalProperties\": false,\n\t\t\"errorMessage\": {\n\t\t\t\"required\": \"Every resource object MUST contain an 'id' member and a 'type' member\"\n\t\t}\n\t},\n\t{\n\t\t\"$id\": \"/error\",\n\t\t\"type\": \"object\"\n\t},\n\t{\n\t\t\"$id\": \"/meta\",\n\t\t\"type\": \"object\"\n\t},\n\t{\n\t\t\"$id\": \"/link\",\n\t\t\"oneOf\": [\n\t\t\t{\n\t\t\t\t\"type\": [\n\t\t\t\t\t\"string\"\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"type\": [\n\t\t\t\t\t\"object\"\n\t\t\t\t],\n\t\t\t\t\"properties\": {\n\t\t\t\t\t\"href\": {\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"errorMessage\": \"Member 'href' should be a string containing the link’s URL.\"\n\t\t\t\t\t},\n\t\t\t\t\t\"meta\": {\n\t\t\t\t\t\t\"$ref\": \"/meta\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"additionalProperties\": false\n\t\t\t}\n\t\t],\n\t\t\"errorMessage\": \"A 'link' MUST be represented either a string containing the link’s URL, or an object which can contain the 'href' and 'meta' members\"\n\t}\n];","import Ajv from 'ajv'\r\nimport AjvErrors from 'ajv-errors'\r\nimport schemas from './schemas'\r\n\r\nconst ajv = new Ajv({\r\n  schemas,\r\n  verbose: true,\r\n  allErrors: true,\r\n  jsonPointers: true\r\n})\r\nAjvErrors(ajv, {})\r\n\r\nexport const validate = (ref, data) => ajv.validate(ref, data)\r\nexport const addSchema = schemas => ajv.addShema(schema)\r\nexport const getSchemas = refs => {\r\n  const schemas = {}\r\n\r\n  for(let key in ajv._schemas) {\r\n    schemas[key] = ajv._schemas[key].schema\r\n  }\r\n\r\n  return schemas\r\n}\r\n","module.exports = require(\"ajv\");","module.exports = require(\"ajv-errors\");","module.exports = require(\"babel-runtime/core-js/object/assign\");","module.exports = require(\"babel-runtime/core-js/object/define-property\");","module.exports = require(\"babel-runtime/core-js/object/keys\");","module.exports = require(\"babel-runtime/core-js/promise\");","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");","module.exports = require(\"json8-patch\");","module.exports = require(\"lodash/cloneDeep\");","module.exports = require(\"lodash/defaultsDeep\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"lodash/omit\");","module.exports = require(\"lodash/pick\");","module.exports = require(\"lodash/set\");"],"sourceRoot":""}